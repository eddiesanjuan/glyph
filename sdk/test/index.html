<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glyph SDK Test</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #1e3a5f;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
    }
    .editor-wrapper {
      height: 700px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }
    .event-log {
      margin-top: 20px;
      padding: 16px;
      background: #1f2937;
      color: #10b981;
      border-radius: 8px;
      font-family: monospace;
      font-size: 13px;
      max-height: 200px;
      overflow-y: auto;
    }
    .event-log:empty::before {
      content: 'Events will appear here...';
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Glyph SDK Test</h1>

    <div class="editor-wrapper">
      <glyph-editor
        api-key="gk_test123456789abcdef"
        api-url="http://localhost:3000"
        template="quote-modern"
        data='{
          "client": {
            "name": "Acme Corporation",
            "email": "john@acme.com",
            "company": "Acme Corp",
            "address": "123 Business St, Suite 100, San Francisco, CA"
          },
          "lineItems": [
            {"description": "Premium Widget Pro", "quantity": 10, "unitPrice": 49.99, "total": 499.90},
            {"description": "Standard Widget", "quantity": 25, "unitPrice": 29.99, "total": 749.75},
            {"description": "Installation & Setup", "quantity": 1, "unitPrice": 299.00, "total": 299.00}
          ],
          "totals": {
            "subtotal": 1548.65,
            "tax": 154.87,
            "total": 1703.52
          },
          "meta": {
            "quoteNumber": "Q-2026-0118",
            "date": "January 18, 2026",
            "validUntil": "February 18, 2026",
            "notes": "Thank you for considering our services!",
            "terms": "Payment due within 30 days. All sales are final."
          },
          "branding": {
            "companyName": "Glyph Demo Company",
            "companyAddress": "456 Innovation Drive, San Francisco, CA 94105"
          }
        }'
        theme='{"primaryColor": "#1e3a5f"}'
      ></glyph-editor>
    </div>

    <div class="event-log" id="events"></div>
  </div>

  <script src="../dist/glyph.min.js"></script>
  <script>
    const editor = document.querySelector('glyph-editor');
    const eventLog = document.getElementById('events');

    function logEvent(name, detail) {
      const time = new Date().toLocaleTimeString();
      const line = document.createElement('div');
      line.textContent = `[${time}] ${name}: ${JSON.stringify(detail)}`;
      eventLog.insertBefore(line, eventLog.firstChild);
    }

    editor.addEventListener('glyph:ready', (e) => logEvent('ready', e.detail));
    editor.addEventListener('glyph:modified', (e) => logEvent('modified', e.detail));
    editor.addEventListener('glyph:saved', (e) => logEvent('saved', { size: e.detail.blob?.size }));
    editor.addEventListener('glyph:error', (e) => logEvent('error', e.detail));

    console.log('Glyph SDK Test Page Loaded');
  </script>
</body>
</html>
