# glyph-pdf

Generate PDFs with AI. One function call to create professional PDFs from data or HTML.

```
pip install glyph-pdf
```

## Quick Start

```python
from glyph_pdf import Glyph

glyph = Glyph("gk_your_api_key")
result = glyph.create(data={"company": "Acme Corp", "total": "$1,250.00"})
print(result["url"])
```

Three lines. Data in, PDF out.

## Installation

```bash
pip install glyph-pdf
# or
poetry add glyph-pdf
# or
uv add glyph-pdf
```

Requires Python 3.8+. Zero dependencies -- uses only the standard library.

## Usage

### Initialize

```python
from glyph_pdf import Glyph

# Simple -- just pass your API key
glyph = Glyph("gk_your_api_key")

# With custom base URL
glyph = Glyph("gk_your_api_key", base_url="https://api.glyph.you")
```

Or use the factory function:

```python
from glyph_pdf import glyph

client = glyph("gk_your_api_key")
```

### Create a PDF

```python
result = glyph.create(
    data={
        "company": "Acme Corp",
        "invoice_number": "INV-001",
        "items": [
            {"description": "Consulting", "quantity": 10, "rate": "$125.00", "amount": "$1,250.00"},
        ],
        "total": "$1,250.00",
    },
    intent="professional invoice with blue accents",
    style="stripe-clean",
    format="pdf",
)

print(result["url"])        # Base64 data URL
print(result["sessionId"])  # Use with /v1/modify for further edits
print(result["analysis"])   # AI-detected document type and fields
```

### Create from HTML

```python
result = glyph.create(html="<h1>Hello World</h1><p>Generated by Glyph.</p>")
```

### Create from URL

```python
result = glyph.create(url="https://example.com/report")
```

### Discover Templates

```python
templates = glyph.templates()
# => [{"id": "quote-modern", "name": "Modern Quote", ...}, ...]

# Filter by category
invoices = glyph.templates(category="invoice")
```

### Get Template Schema

```python
schema = glyph.template_schema("invoice-clean")
# Returns JSON Schema describing the data structure
```

### Generate a PNG

```python
png = glyph.create(
    data={"title": "Q4 Report", "author": "Jane Doe"},
    format="png",
)
```

### Page Options

```python
result = glyph.create(
    data={"company": "Acme Corp"},
    options={
        "pageSize": "A4",
        "orientation": "landscape",
        "margin": {"top": "20mm", "bottom": "20mm", "left": "15mm", "right": "15mm"},
        "scale": 1,
    },
)
```

## Error Handling

All API errors raise `GlyphError` with structured fields:

```python
from glyph_pdf import Glyph, GlyphError

glyph = Glyph("gk_your_api_key")

try:
    glyph.create(data={})
except GlyphError as err:
    print(err)         # "Data object cannot be empty"
    print(err.status)  # 400
    print(err.code)    # "VALIDATION_ERROR"
```

## Type Hints

Full type annotations are included. A `py.typed` marker file is present for PEP 561 compliance, so type checkers like mypy and pyright will pick up the types automatically.

## API Reference

### `Glyph(api_key, *, base_url="https://api.glyph.you")`

Create a client instance.

| Parameter  | Type  | Description                        |
|------------|-------|------------------------------------|
| `api_key`  | `str` | Your Glyph API key                 |
| `base_url` | `str` | API base URL (optional, has default)|

### `glyph.create(**kwargs)`

Generate a PDF or PNG from data.

| Field         | Type            | Required | Description                                                     |
|---------------|-----------------|----------|-----------------------------------------------------------------|
| `data`        | `dict`          | No*      | Document data (field values)                                    |
| `html`        | `str`           | No*      | Raw HTML input                                                  |
| `url`         | `str`           | No*      | URL to render                                                   |
| `template_id` | `str`           | No       | Built-in template ID                                            |
| `format`      | `str`           | No       | Output format: `"pdf"` (default) or `"png"`                     |
| `style`       | `str`           | No       | Visual style: `stripe-clean`, `bold`, `minimal`, `corporate`    |
| `intent`      | `str`           | No       | Natural language description of desired output                  |
| `options`     | `dict`          | No       | Page size, orientation, margins, scale                          |
| `ttl`         | `int`           | No       | Session time-to-live in seconds                                 |

*At least one of `data`, `html`, or `url` should be provided.

Returns a `dict` with `url`, `sessionId`, `format`, `size`, `filename`, `expiresAt`, and optional `analysis`.

### `glyph.templates(category=None)`

List built-in templates. Optionally filter by category (`quote`, `invoice`, `receipt`, `report`, `letter`, `contract`, `certificate`, `proposal`).

### `glyph.template_schema(template_id)`

Get the JSON Schema for a specific template. Useful for validating data before generation.

## License

MIT
