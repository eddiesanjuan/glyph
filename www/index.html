<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glyph - AI-Powered PDF Customization</title>
  <meta name="description" content="Let your customers personalize documents with natural language. Ship in minutes with 2 lines of code.">

  <!-- Fonts - Geist for premium developer tool aesthetic -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Favicon - Teal accent -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%2314B8A6'/><text y='.82em' x='50%' text-anchor='middle' font-size='65' fill='white' font-family='system-ui'>G</text></svg>">

  <style>
    /* ============================================
       CSS Variables & Reset
       ============================================ */
    :root {
      /* Backgrounds - Near-black with slight warmth (Linear-inspired) */
      --color-bg: #0A0A0B;
      --color-bg-elevated: #111113;
      --color-bg-card: #18181B;
      --color-surface: #1F1F23;
      --color-border: rgba(20, 184, 166, 0.2);
      --color-border-subtle: #27272A;

      /* Accent - Electric Teal (NOT purple) */
      --color-primary: #14B8A6;
      --color-primary-bright: #2DD4BF;
      --color-primary-dark: #0D9488;
      --color-primary-glow: rgba(20, 184, 166, 0.2);
      --color-primary-subtle: rgba(20, 184, 166, 0.08);

      /* Text - Zinc scale for warmth */
      --color-text: #FAFAFA;
      --color-text-muted: #A1A1AA;
      --color-text-subtle: #71717A;

      /* Semantic colors */
      --color-success: #22C55E;
      --color-warning: #F59E0B;
      --color-error: #EF4444;

      /* Typography - Inter for premium developer tool feel */
      --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --font-mono: 'SF Mono', 'Fira Code', 'JetBrains Mono', monospace;

      /* Border radius */
      --radius-sm: 6px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;

      /* Transitions */
      --transition-fast: 0.15s ease;
      --transition-smooth: 0.2s ease;

      /* Spacing */
      --space-section: 120px;
    }

    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
    }

    body {
      font-family: var(--font-sans);
      background: var(--color-bg);
      color: var(--color-text);
      line-height: 1.6;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ============================================
       Background Effects - Clean and minimal
       ============================================ */
    .gradient-mesh {
      display: none; /* Removed gradient orbs per design brief */
    }

    .gradient-orb {
      display: none;
    }

    .noise-overlay {
      display: none; /* Removed noise overlay per design brief */
    }

    /* ============================================
       Layout & Navigation
       ============================================ */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    .nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 16px 0;
      background: transparent;
      transition: background var(--transition-smooth), border-color var(--transition-smooth);
    }

    .nav.scrolled {
      background: rgba(10, 10, 11, 0.95);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .nav__inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav__logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--color-text);
    }

    .nav__logo-mark {
      width: 36px;
      height: 36px;
      background: var(--color-primary);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-sans);
      font-size: 20px;
      font-weight: 600;
      color: white;
    }

    .nav__logo-text {
      font-family: var(--font-sans);
      font-size: 20px;
      font-weight: 600;
      letter-spacing: -0.02em;
    }

    .nav__links {
      display: flex;
      align-items: center;
      gap: 32px;
      list-style: none;
    }

    .nav__link {
      color: var(--color-text-muted);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      transition: color var(--transition-fast);
    }

    .nav__link:hover {
      color: var(--color-text);
    }

    .nav__cta {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      background: var(--color-primary);
      color: white;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      border-radius: var(--radius-md);
      transition: background var(--transition-fast);
    }

    .nav__cta:hover {
      background: var(--color-primary-bright);
    }

    /* ============================================
       Hero Section
       ============================================ */
    .hero {
      position: relative;
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 140px 0 80px;
      z-index: 2;
    }

    .hero__content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 80px;
      align-items: center;
    }

    .hero__text {
      max-width: 540px;
    }

    .hero__badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 14px;
      background: var(--color-primary-subtle);
      border: 1px solid var(--color-border-subtle);
      border-radius: 100px;
      font-size: 13px;
      font-weight: 500;
      color: var(--color-primary-bright);
      margin-bottom: 24px;
      animation: fadeInUp 0.6s ease-out;
    }

    .hero__badge::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--color-success);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(0.8); }
    }

    .hero__title {
      font-family: var(--font-sans);
      font-size: clamp(44px, 5vw, 64px);
      font-weight: 600;
      line-height: 1.1;
      letter-spacing: -0.03em;
      margin-bottom: 24px;
      animation: fadeInUp 0.6s ease-out 0.1s both;
    }

    .hero__title span {
      color: var(--color-primary-bright);
    }

    .hero__subtitle {
      font-size: 18px;
      color: var(--color-text-muted);
      line-height: 1.7;
      margin-bottom: 40px;
      animation: fadeInUp 0.6s ease-out 0.2s both;
    }

    .hero__actions {
      display: flex;
      gap: 12px;
      animation: fadeInUp 0.6s ease-out 0.3s both;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 24px;
      font-family: var(--font-sans);
      font-size: 14px;
      font-weight: 500;
      text-decoration: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: background var(--transition-fast), border-color var(--transition-fast);
      border: none;
    }

    .btn--primary {
      background: var(--color-primary);
      color: white;
    }

    .btn--primary:hover {
      background: var(--color-primary-bright);
    }

    .btn--secondary {
      background: transparent;
      color: var(--color-text);
      border: 1px solid var(--color-border-subtle);
    }

    .btn--secondary:hover {
      border-color: var(--color-text-muted);
    }

    .btn__icon {
      width: 16px;
      height: 16px;
    }

    /* Hero Demo Preview */
    .hero__demo {
      position: relative;
      animation: fadeInUp 0.6s ease-out 0.4s both;
    }

    .demo-container {
      position: relative;
      background: var(--color-bg-card);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: 0 24px 48px -12px rgba(0, 0, 0, 0.4);
    }

    .demo-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 16px;
    }

    .demo-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--color-border-subtle);
    }

    .demo-dot--red { background: #EF4444; }
    .demo-dot--yellow { background: #F59E0B; }
    .demo-dot--green { background: #10B981; }

    .demo-preview {
      background: white;
      border-radius: var(--radius-md);
      overflow: hidden;
      aspect-ratio: 8.5 / 7;
      position: relative;
      transition: all 0.5s ease;
    }

    .demo-preview__content {
      position: absolute;
      inset: 0;
      padding: 24px;
      font-family: system-ui, sans-serif;
      font-size: 11px;
      color: #1a1a1a;
      overflow: hidden;
    }

    .demo-doc-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--demo-accent, #14B8A6);
      margin-bottom: 16px;
      transition: border-color 0.5s ease;
    }

    .demo-company {
      font-size: 16px;
      font-weight: 700;
      color: var(--demo-accent, #14B8A6);
      transition: color 0.5s ease;
    }

    .demo-quote-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--demo-accent, #14B8A6);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transition: color 0.5s ease;
    }

    .demo-meta {
      display: flex;
      gap: 24px;
      background: #f9fafb;
      padding: 12px 16px;
      border-radius: 6px;
      margin-bottom: 16px;
    }

    .demo-meta-item {
      text-align: center;
    }

    .demo-meta-label {
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #666;
      margin-bottom: 4px;
    }

    .demo-meta-value {
      font-weight: 600;
    }

    .demo-table {
      width: 100%;
      margin-top: 12px;
    }

    .demo-table-header {
      background: var(--demo-accent, #14B8A6);
      color: white;
      padding: 8px 12px;
      border-radius: 4px 4px 0 0;
      font-weight: 600;
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      transition: background-color 0.5s ease;
    }

    .demo-table-row {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      padding: 10px 12px;
      border-bottom: 1px solid #e5e5e5;
      font-size: 10px;
    }

    /* Floating Command Animation */
    .demo-command {
      position: absolute;
      bottom: -20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--color-bg-elevated);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      animation: commandFloat 3s ease-in-out infinite;
    }

    @keyframes commandFloat {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(-8px); }
    }

    .demo-command__icon {
      width: 20px;
      height: 20px;
      color: var(--color-primary-bright);
    }

    .demo-command__text {
      font-size: 14px;
      color: var(--color-text-muted);
    }

    .demo-command__cursor {
      width: 2px;
      height: 16px;
      background: var(--color-primary-bright);
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ============================================
       Live Playground Section - THE MAGIC
       ============================================ */
    .playground {
      position: relative;
      padding: var(--space-section) 0;
      z-index: 2;
    }

    .section-header {
      text-align: center;
      max-width: 600px;
      margin: 0 auto 64px;
    }

    .section-label {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-primary-bright);
      margin-bottom: 16px;
    }

    .section-title {
      font-family: var(--font-sans);
      font-size: clamp(32px, 4vw, 44px);
      font-weight: 600;
      line-height: 1.15;
      letter-spacing: -0.02em;
      margin-bottom: 16px;
    }

    .section-subtitle {
      font-size: 17px;
      color: var(--color-text-muted);
      line-height: 1.7;
    }

    .playground__editor {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: 0 24px 48px -12px rgba(0, 0, 0, 0.4);
    }

    .playground__toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      background: var(--color-bg-elevated);
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .playground__tabs {
      display: flex;
      gap: 4px;
      background: var(--color-surface);
      padding: 4px;
      border-radius: var(--radius-sm);
    }

    .playground__tab {
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 500;
      color: var(--color-text-muted);
      background: transparent;
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .playground__tab:hover {
      color: var(--color-text);
    }

    .playground__tab--active {
      background: var(--color-primary);
      color: white;
    }

    .playground__actions {
      display: flex;
      gap: 12px;
    }

    .playground__body {
      display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: 500px;
    }

    .playground__input-area {
      padding: 24px;
      border-right: 1px solid var(--color-border-subtle);
      display: flex;
      flex-direction: column;
    }

    .playground__prompt {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .playground__prompt-label {
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-text-subtle);
    }

    .playground__input {
      flex: 1;
      width: 100%;
      padding: 16px;
      background: var(--color-surface);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      color: var(--color-text);
      font-family: var(--font-body);
      font-size: 15px;
      line-height: 1.6;
      resize: none;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .playground__input:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-subtle);
    }

    .playground__input::placeholder {
      color: var(--color-text-subtle);
    }

    .playground__suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .playground__suggestion {
      padding: 8px 14px;
      background: var(--color-primary-subtle);
      border: 1px solid var(--color-border);
      border-radius: 100px;
      font-size: 13px;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .playground__suggestion:hover {
      background: var(--color-primary);
      border-color: var(--color-primary);
      color: white;
      transform: translateY(-1px);
    }

    .playground__hint {
      margin-top: 12px;
      font-size: 13px;
      color: var(--color-text-subtle);
      font-style: italic;
    }

    .playground__preview-area {
      padding: 24px;
      background: var(--color-bg-elevated);
      display: flex;
      flex-direction: column;
    }

    .playground__preview-label {
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-text-subtle);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .playground__preview-status {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      font-weight: 400;
      text-transform: none;
      letter-spacing: 0;
    }

    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--color-success);
      animation: pulse 2s infinite;
    }

    .playground__preview {
      flex: 1;
      background: white;
      border-radius: var(--radius-md);
      overflow: hidden;
      position: relative;
      min-height: 400px;
    }

    .playground__preview-frame {
      width: 100%;
      height: 100%;
      min-height: 400px;
      border: none;
    }

    .playground__loading {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.95);
      z-index: 10;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
    }

    .playground__loading.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .playground__loading-text {
      margin-top: 16px;
      font-size: 14px;
      color: #666;
    }

    .playground__rate-notice {
      margin-top: 16px;
      padding: 12px 16px;
      background: var(--color-primary-subtle);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: 13px;
      color: var(--color-text-muted);
      text-align: center;
    }

    /* Apply Button - Prominent */
    .playground__apply-btn {
      margin-top: 16px;
      width: 100%;
      padding: 12px 24px;
      background: var(--color-primary);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-family: var(--font-sans);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background var(--transition-fast);
    }

    .playground__apply-btn:hover:not(:disabled) {
      background: var(--color-primary-bright);
    }

    .playground__apply-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .playground__apply-btn.loading {
      position: relative;
      color: transparent;
    }

    .playground__apply-btn.loading::after {
      content: '';
      position: absolute;
      width: 18px;
      height: 18px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Success flash animation */
    @keyframes successFlash {
      0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.5); }
      50% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
      100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
    }

    .playground__preview.success {
      animation: successFlash 0.5s ease-out;
    }

    /* ============================================
       Features Section
       ============================================ */
    .features {
      position: relative;
      padding: var(--space-section) 0;
      z-index: 2;
    }

    .features__grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    .feature-card {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-lg);
      padding: 28px;
      transition: border-color var(--transition-smooth);
      position: relative;
      overflow: hidden;
    }

    .feature-card:hover {
      border-color: var(--color-border);
    }

    .feature-card__icon {
      width: 44px;
      height: 44px;
      background: var(--color-primary-subtle);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      color: var(--color-primary-bright);
    }

    .feature-card__icon svg {
      width: 22px;
      height: 22px;
    }

    .feature-card__title {
      font-family: var(--font-sans);
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 10px;
      letter-spacing: -0.01em;
    }

    .feature-card__description {
      font-size: 14px;
      color: var(--color-text-muted);
      line-height: 1.6;
    }

    /* Highlight Card */
    .feature-card--highlight {
      grid-column: span 2;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      align-items: center;
      background: var(--color-bg-card);
    }

    .feature-card--highlight .feature-card__content {
      padding-right: 16px;
    }

    .feature-card--highlight .feature-card__visual {
      background: var(--color-surface);
      border-radius: var(--radius-md);
      padding: 20px;
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.6;
    }

    .code-line {
      opacity: 0.7;
    }

    .code-line--highlight {
      opacity: 1;
      color: var(--color-primary-bright);
    }

    /* ============================================
       Integration Section
       ============================================ */
    .integration {
      position: relative;
      padding: var(--space-section) 0;
      z-index: 2;
    }

    .integration__content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 64px;
      align-items: center;
    }

    .integration__text h2 {
      font-family: var(--font-sans);
      font-size: clamp(32px, 4vw, 44px);
      font-weight: 600;
      line-height: 1.15;
      letter-spacing: -0.02em;
      margin-bottom: 20px;
    }

    .integration__text p {
      font-size: 17px;
      color: var(--color-text-muted);
      line-height: 1.7;
      margin-bottom: 28px;
    }

    .framework-badges {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .framework-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: var(--color-surface);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 500;
      color: var(--color-text-muted);
      transition: all var(--transition-fast);
    }

    .framework-badge:hover {
      border-color: var(--color-border);
      color: var(--color-text);
    }

    .framework-badge svg {
      width: 20px;
      height: 20px;
    }

    .integration__code {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .code-tabs {
      display: flex;
      background: var(--color-bg-elevated);
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .code-tab {
      padding: 12px 20px;
      font-size: 13px;
      font-weight: 500;
      color: var(--color-text-muted);
      background: transparent;
      border: none;
      cursor: pointer;
      transition: color var(--transition-fast);
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
    }

    .code-tab:hover {
      color: var(--color-text);
    }

    .code-tab--active {
      color: var(--color-primary-bright);
      border-bottom-color: var(--color-primary);
    }

    .code-content {
      padding: 20px;
    }

    .code-block {
      display: none;
    }

    .code-block--active {
      display: block;
    }

    .code-block pre {
      background: var(--color-surface);
      padding: 20px;
      border-radius: var(--radius-md);
      overflow-x: auto;
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.7;
    }

    .code-block code {
      color: var(--color-text-muted);
    }

    /* Syntax highlighting - subtle, not rainbow */
    .code-keyword { color: #F472B6; }
    .code-string { color: #34D399; }
    .code-tag { color: var(--color-primary-bright); }
    .code-attr { color: #60A5FA; }
    .code-comment { color: var(--color-text-subtle); }

    /* ============================================
       Pricing Section
       ============================================ */
    .pricing {
      position: relative;
      padding: var(--space-section) 0;
      z-index: 2;
    }

    .pricing__grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .pricing-card {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-lg);
      padding: 28px;
      display: flex;
      flex-direction: column;
      transition: border-color var(--transition-smooth);
    }

    .pricing-card:hover {
      border-color: var(--color-border);
    }

    .pricing-card--popular {
      background: var(--color-bg-card);
      border-color: var(--color-primary);
      position: relative;
    }

    .pricing-card--popular::before {
      content: 'Most Popular';
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      padding: 6px 14px;
      background: var(--color-primary);
      color: white;
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      border-radius: 100px;
    }

    .pricing-card__name {
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--color-text-muted);
      margin-bottom: 8px;
    }

    .pricing-card__price {
      font-family: var(--font-sans);
      font-size: 40px;
      font-weight: 600;
      margin-bottom: 4px;
      letter-spacing: -0.02em;
    }

    .pricing-card__price span {
      font-size: 15px;
      font-weight: 400;
      color: var(--color-text-muted);
    }

    .pricing-card__description {
      font-size: 14px;
      color: var(--color-text-muted);
      margin-bottom: 24px;
      padding-bottom: 24px;
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .pricing-card__features {
      list-style: none;
      flex: 1;
      margin-bottom: 24px;
    }

    .pricing-card__features li {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 6px 0;
      font-size: 14px;
      color: var(--color-text-muted);
    }

    .pricing-card__features li svg {
      width: 16px;
      height: 16px;
      color: var(--color-success);
      flex-shrink: 0;
      margin-top: 2px;
    }

    .pricing-card .btn {
      width: 100%;
    }

    /* ============================================
       Airtable Integration Section
       ============================================ */
    .airtable {
      padding: var(--space-section) 0;
      position: relative;
      z-index: 2;
    }

    .airtable__content {
      display: grid;
      grid-template-columns: 1fr 1.2fr;
      gap: 80px;
      align-items: center;
    }

    .airtable__text h2 {
      font-family: var(--font-sans);
      font-size: clamp(32px, 4vw, 44px);
      font-weight: 600;
      line-height: 1.15;
      letter-spacing: -0.02em;
      margin-bottom: 20px;
    }

    .airtable__text h2 span {
      color: var(--color-primary-bright);
    }

    .airtable__text p {
      font-size: 17px;
      color: var(--color-text-muted);
      line-height: 1.7;
      margin-bottom: 28px;
    }

    .airtable__steps {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 32px;
    }

    .airtable-step {
      display: flex;
      gap: 16px;
      align-items: flex-start;
    }

    .airtable-step__number {
      width: 28px;
      height: 28px;
      min-width: 28px;
      background: var(--color-primary-subtle);
      border: 1px solid var(--color-primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 600;
      color: var(--color-primary-bright);
    }

    .airtable-step__content h4 {
      font-size: 15px;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: 4px;
    }

    .airtable-step__content p {
      font-size: 14px;
      color: var(--color-text-muted);
      line-height: 1.5;
      margin: 0;
    }

    .airtable__demo {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .airtable__demo-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      background: var(--color-bg-elevated);
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .airtable__demo-icon {
      width: 32px;
      height: 32px;
      background: #FCBF49;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .airtable__demo-icon svg {
      width: 20px;
      height: 20px;
      color: #000;
    }

    .airtable__demo-title {
      font-size: 14px;
      font-weight: 500;
      color: var(--color-text);
    }

    .airtable__demo-badge {
      margin-left: auto;
      padding: 4px 10px;
      background: var(--color-primary-subtle);
      border: 1px solid var(--color-primary);
      border-radius: 100px;
      font-size: 11px;
      font-weight: 500;
      color: var(--color-primary-bright);
    }

    .airtable__demo-body {
      padding: 24px;
    }

    .airtable__demo-flow {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .airtable__demo-input {
      background: var(--color-surface);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      padding: 16px;
    }

    .airtable__demo-input-label {
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--color-text-subtle);
      margin-bottom: 8px;
    }

    .airtable__demo-input-text {
      font-size: 14px;
      color: var(--color-text);
      line-height: 1.5;
    }

    .airtable__demo-arrow {
      display: flex;
      justify-content: center;
      color: var(--color-primary);
    }

    .airtable__demo-arrow svg {
      width: 24px;
      height: 24px;
    }

    .airtable__demo-output {
      background: var(--color-surface);
      border: 1px solid var(--color-primary);
      border-radius: var(--radius-md);
      overflow: hidden;
    }

    .airtable__demo-output-header {
      padding: 12px 16px;
      background: var(--color-primary-subtle);
      border-bottom: 1px solid var(--color-border);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .airtable__demo-output-header svg {
      width: 16px;
      height: 16px;
      color: var(--color-primary-bright);
    }

    .airtable__demo-output-header span {
      font-size: 12px;
      font-weight: 500;
      color: var(--color-primary-bright);
    }

    .airtable__demo-preview {
      padding: 20px;
      background: #fff;
      color: #1a1a1a;
    }

    .airtable__demo-preview-doc {
      font-family: Georgia, serif;
    }

    .airtable__demo-preview-doc h3 {
      font-size: 16px;
      color: #1e3a5f;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid #14B8A6;
    }

    .airtable__demo-preview-doc .meta {
      display: flex;
      gap: 24px;
      font-size: 11px;
      color: #666;
      margin-bottom: 16px;
    }

    .airtable__demo-preview-doc table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
      margin-bottom: 12px;
    }

    .airtable__demo-preview-doc th {
      background: #f9fafb;
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #e5e5e5;
      font-weight: 600;
    }

    .airtable__demo-preview-doc td {
      padding: 8px;
      border-bottom: 1px solid #e5e5e5;
    }

    .airtable__demo-preview-doc .total {
      text-align: right;
      font-size: 14px;
      font-weight: 600;
      color: #1e3a5f;
    }

    @media (max-width: 1024px) {
      .airtable__content {
        grid-template-columns: 1fr;
        gap: 48px;
      }
    }

    @media (max-width: 768px) {
      .airtable__demo {
        display: none;
      }
    }

    /* ============================================
       Footer
       ============================================ */
    .footer {
      position: relative;
      padding: 80px 0 40px;
      border-top: 1px solid var(--color-border-subtle);
      z-index: 2;
    }

    .footer__content {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 48px;
      margin-bottom: 48px;
    }

    .footer__brand {
      max-width: 260px;
    }

    .footer__logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--color-text);
      margin-bottom: 16px;
    }

    .footer__logo-mark {
      width: 32px;
      height: 32px;
      background: var(--color-primary);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-sans);
      font-size: 18px;
      font-weight: 600;
      color: white;
    }

    .footer__logo-text {
      font-family: var(--font-sans);
      font-size: 18px;
      font-weight: 600;
    }

    .footer__tagline {
      font-size: 14px;
      color: var(--color-text-muted);
      line-height: 1.6;
    }

    .footer__column h4 {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--color-text);
      margin-bottom: 16px;
    }

    .footer__column ul {
      list-style: none;
    }

    .footer__column li {
      margin-bottom: 10px;
    }

    .footer__column a {
      font-size: 14px;
      color: var(--color-text-muted);
      text-decoration: none;
      transition: color var(--transition-fast);
    }

    .footer__column a:hover {
      color: var(--color-text);
    }

    .footer__bottom {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-top: 24px;
      border-top: 1px solid var(--color-border-subtle);
    }

    .footer__copyright {
      font-size: 13px;
      color: var(--color-text-subtle);
    }

    .footer__social {
      display: flex;
      gap: 12px;
    }

    .footer__social a {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-sm);
      color: var(--color-text-muted);
      transition: border-color var(--transition-fast), color var(--transition-fast);
    }

    .footer__social a:hover {
      border-color: var(--color-primary);
      color: var(--color-primary);
    }

    .footer__social svg {
      width: 16px;
      height: 16px;
    }

    /* ============================================
       Responsive Design
       ============================================ */
    @media (max-width: 1024px) {
      .hero__content {
        grid-template-columns: 1fr;
        gap: 60px;
      }

      .hero__demo {
        order: -1;
      }

      .features__grid {
        grid-template-columns: 1fr 1fr;
      }

      .feature-card--highlight {
        grid-column: span 2;
      }

      .pricing__grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .footer__content {
        grid-template-columns: 1fr 1fr;
        gap: 40px;
      }
    }

    @media (max-width: 768px) {
      .nav__links {
        display: none;
      }

      .hero {
        padding: 120px 0 60px;
      }

      .hero__title {
        font-size: 40px;
      }

      .hero__actions {
        flex-direction: column;
      }

      .features__grid {
        grid-template-columns: 1fr;
      }

      .feature-card--highlight {
        grid-column: span 1;
        grid-template-columns: 1fr;
      }

      .playground__body {
        grid-template-columns: 1fr;
      }

      .playground__input-area {
        border-right: none;
        border-bottom: 1px solid var(--color-border-subtle);
      }

      .integration__content {
        grid-template-columns: 1fr;
        gap: 40px;
      }

      .pricing__grid {
        grid-template-columns: 1fr;
      }

      .footer__content {
        grid-template-columns: 1fr;
        gap: 32px;
      }

      .footer__bottom {
        flex-direction: column;
        gap: 20px;
        text-align: center;
      }
    }

    /* ============================================
       Utility Classes
       ============================================ */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* Loading state for playground */
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--color-border-subtle);
      border-top-color: var(--color-primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    .loading-spinner--small {
      width: 20px;
      height: 20px;
      border-width: 2px;
    }

    /* ============================================
       Modal Component
       ============================================ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition-smooth), visibility var(--transition-smooth);
    }

    .modal-overlay.visible {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-lg);
      padding: 32px;
      max-width: 420px;
      width: calc(100% - 48px);
      transform: scale(0.95) translateY(20px);
      transition: transform var(--transition-smooth);
      text-align: center;
    }

    .modal-overlay.visible .modal {
      transform: scale(1) translateY(0);
    }

    .modal__icon {
      width: 56px;
      height: 56px;
      background: var(--color-primary-subtle);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
    }

    .modal__icon svg {
      width: 28px;
      height: 28px;
      color: var(--color-primary-bright);
    }

    .modal__title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--color-text);
    }

    .modal__description {
      font-size: 15px;
      color: var(--color-text-muted);
      line-height: 1.6;
      margin-bottom: 24px;
    }

    .modal__actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    .modal__btn {
      padding: 12px 24px;
      font-size: 14px;
      font-weight: 500;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-fast);
      border: none;
      font-family: var(--font-sans);
    }

    .modal__btn--primary {
      background: var(--color-primary);
      color: white;
    }

    .modal__btn--primary:hover {
      background: var(--color-primary-bright);
    }

    .modal__btn--secondary {
      background: transparent;
      color: var(--color-text-muted);
      border: 1px solid var(--color-border-subtle);
    }

    .modal__btn--secondary:hover {
      color: var(--color-text);
      border-color: var(--color-text-muted);
    }

    /* ============================================
       Airtable Connection Modal
       ============================================ */
    .airtable-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1001;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      padding: 24px;
    }

    .airtable-modal-overlay.visible {
      opacity: 1;
      visibility: visible;
    }

    .airtable-modal {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-xl);
      width: 100%;
      max-width: 900px;
      max-height: 90vh;
      overflow: hidden;
      transform: scale(0.95) translateY(20px);
      transition: transform 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    .airtable-modal-overlay.visible .airtable-modal {
      transform: scale(1) translateY(0);
    }

    .airtable-modal__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 24px 28px;
      border-bottom: 1px solid var(--color-border-subtle);
      background: var(--color-bg-elevated);
    }

    .airtable-modal__header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .airtable-modal__icon {
      width: 44px;
      height: 44px;
      background: linear-gradient(135deg, #FCBF49, #F77F00);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .airtable-modal__icon svg {
      width: 24px;
      height: 24px;
      color: #000;
    }

    .airtable-modal__title {
      font-size: 20px;
      font-weight: 600;
      color: var(--color-text);
    }

    .airtable-modal__subtitle {
      font-size: 13px;
      color: var(--color-text-muted);
      margin-top: 2px;
    }

    .airtable-modal__close {
      width: 36px;
      height: 36px;
      background: transparent;
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-sm);
      color: var(--color-text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-fast);
    }

    .airtable-modal__close:hover {
      border-color: var(--color-text-muted);
      color: var(--color-text);
    }

    .airtable-modal__close svg {
      width: 18px;
      height: 18px;
    }

    /* Progress Steps */
    .airtable-progress {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 20px 28px;
      background: var(--color-bg-elevated);
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .airtable-progress__step {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .airtable-progress__number {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
      background: var(--color-surface);
      color: var(--color-text-subtle);
      border: 1px solid var(--color-border-subtle);
      transition: all 0.3s ease;
    }

    .airtable-progress__step.active .airtable-progress__number {
      background: var(--color-primary);
      color: white;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 4px var(--color-primary-subtle);
    }

    .airtable-progress__step.completed .airtable-progress__number {
      background: var(--color-success);
      color: white;
      border-color: var(--color-success);
    }

    .airtable-progress__label {
      font-size: 13px;
      color: var(--color-text-subtle);
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .airtable-progress__step.active .airtable-progress__label {
      color: var(--color-text);
    }

    .airtable-progress__step.completed .airtable-progress__label {
      color: var(--color-success);
    }

    .airtable-progress__connector {
      width: 40px;
      height: 2px;
      background: var(--color-border-subtle);
      margin: 0 8px;
      transition: background 0.3s ease;
    }

    .airtable-progress__connector.completed {
      background: var(--color-success);
    }

    /* Modal Body */
    .airtable-modal__body {
      padding: 32px 28px;
      overflow-y: auto;
      flex: 1;
    }

    /* Step Content */
    .airtable-step-content {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .airtable-step-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .airtable-step__title {
      font-size: 24px;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: 8px;
    }

    .airtable-step__description {
      font-size: 15px;
      color: var(--color-text-muted);
      margin-bottom: 28px;
      line-height: 1.6;
    }

    /* Form Elements */
    .airtable-input-group {
      margin-bottom: 24px;
    }

    .airtable-input-label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      color: var(--color-text);
      margin-bottom: 8px;
    }

    .airtable-input {
      width: 100%;
      padding: 14px 16px;
      background: var(--color-surface);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      color: var(--color-text);
      font-family: var(--font-mono);
      font-size: 14px;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .airtable-input:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-subtle);
    }

    .airtable-input::placeholder {
      color: var(--color-text-subtle);
    }

    .airtable-input-hint {
      font-size: 12px;
      color: var(--color-text-subtle);
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .airtable-input-hint a {
      color: var(--color-primary-bright);
      text-decoration: none;
    }

    .airtable-input-hint a:hover {
      text-decoration: underline;
    }

    /* Select Dropdowns */
    .airtable-select {
      width: 100%;
      padding: 14px 16px;
      background: var(--color-surface);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      color: var(--color-text);
      font-size: 14px;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23A1A1AA'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 20px;
      padding-right: 44px;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .airtable-select:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-subtle);
    }

    .airtable-select:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .airtable-select option {
      background: var(--color-bg-card);
      color: var(--color-text);
    }

    /* Field Badges */
    .airtable-fields {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 16px;
      padding: 16px;
      background: var(--color-surface);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border-subtle);
    }

    .airtable-fields__title {
      width: 100%;
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-subtle);
      margin-bottom: 8px;
    }

    .airtable-field-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: var(--color-primary-subtle);
      border: 1px solid var(--color-border);
      border-radius: 100px;
      font-size: 12px;
      color: var(--color-text-muted);
    }

    .airtable-field-badge svg {
      width: 12px;
      height: 12px;
      color: var(--color-primary-bright);
    }

    /* Description Textarea */
    .airtable-textarea {
      width: 100%;
      min-height: 140px;
      padding: 16px;
      background: var(--color-surface);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      color: var(--color-text);
      font-family: var(--font-sans);
      font-size: 15px;
      line-height: 1.6;
      resize: vertical;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .airtable-textarea:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-subtle);
    }

    .airtable-textarea::placeholder {
      color: var(--color-text-subtle);
    }

    /* Style Presets */
    .airtable-styles {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .airtable-style-btn {
      flex: 1;
      padding: 16px;
      background: var(--color-surface);
      border: 2px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      color: var(--color-text-muted);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition-fast);
      text-align: center;
    }

    .airtable-style-btn:hover {
      border-color: var(--color-text-muted);
      color: var(--color-text);
    }

    .airtable-style-btn.selected {
      border-color: var(--color-primary);
      background: var(--color-primary-subtle);
      color: var(--color-primary-bright);
    }

    .airtable-style-btn__icon {
      font-size: 24px;
      margin-bottom: 8px;
    }

    /* Preview Area */
    .airtable-preview-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      min-height: 450px;
    }

    @media (max-width: 768px) {
      .airtable-preview-container {
        grid-template-columns: 1fr;
      }
    }

    .airtable-preview-left {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .airtable-preview-frame-wrapper {
      flex: 1;
      background: white;
      border-radius: var(--radius-md);
      overflow: hidden;
      position: relative;
      min-height: 400px;
      border: 1px solid var(--color-border-subtle);
    }

    .airtable-preview-frame {
      width: 100%;
      height: 100%;
      min-height: 400px;
      border: none;
    }

    .airtable-preview-loading {
      position: absolute;
      inset: 0;
      background: rgba(255, 255, 255, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s, visibility 0.2s;
      z-index: 10;
    }

    .airtable-preview-loading.visible {
      opacity: 1;
      visibility: visible;
    }

    .airtable-preview-loading__text {
      font-size: 14px;
      color: #666;
    }

    .airtable-preview-loading__subtext {
      font-size: 12px;
      color: #999;
    }

    /* Typing animation for AI generation */
    .airtable-ai-typing {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 14px;
      color: var(--color-primary);
    }

    .airtable-ai-typing__dot {
      width: 6px;
      height: 6px;
      background: var(--color-primary);
      border-radius: 50%;
      animation: aiTypingDot 1.4s infinite;
    }

    .airtable-ai-typing__dot:nth-child(2) { animation-delay: 0.2s; }
    .airtable-ai-typing__dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes aiTypingDot {
      0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
      40% { transform: scale(1); opacity: 1; }
    }

    /* Refine Input */
    .airtable-refine {
      display: flex;
      gap: 12px;
    }

    .airtable-refine-input {
      flex: 1;
      padding: 12px 16px;
      background: var(--color-surface);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      color: var(--color-text);
      font-size: 14px;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .airtable-refine-input:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-subtle);
    }

    .airtable-refine-input::placeholder {
      color: var(--color-text-subtle);
    }

    .airtable-refine-btn {
      padding: 12px 20px;
      background: var(--color-primary);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      transition: background var(--transition-fast);
    }

    .airtable-refine-btn:hover:not(:disabled) {
      background: var(--color-primary-bright);
    }

    .airtable-refine-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Actions Panel */
    .airtable-preview-right {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .airtable-info-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      padding: 20px;
    }

    .airtable-info-card__title {
      font-size: 13px;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .airtable-info-card__title svg {
      width: 16px;
      height: 16px;
      color: var(--color-primary-bright);
    }

    .airtable-data-preview {
      font-size: 12px;
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    .airtable-data-row {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .airtable-data-row:last-child {
      border-bottom: none;
    }

    .airtable-data-label {
      color: var(--color-text-subtle);
    }

    .airtable-data-value {
      font-weight: 500;
      color: var(--color-text);
    }

    /* Download Actions */
    .airtable-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: auto;
    }

    .airtable-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 24px;
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition-fast);
      border: none;
    }

    .airtable-btn--primary {
      background: var(--color-primary);
      color: white;
    }

    .airtable-btn--primary:hover:not(:disabled) {
      background: var(--color-primary-bright);
    }

    .airtable-btn--secondary {
      background: transparent;
      color: var(--color-text);
      border: 1px solid var(--color-border-subtle);
    }

    .airtable-btn--secondary:hover:not(:disabled) {
      border-color: var(--color-text-muted);
    }

    .airtable-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .airtable-btn svg {
      width: 18px;
      height: 18px;
    }

    .airtable-btn.loading {
      position: relative;
      color: transparent;
    }

    .airtable-btn.loading::after {
      content: '';
      position: absolute;
      width: 18px;
      height: 18px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    /* Batch Generation Styles */
    .airtable-batch-section {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--color-border-subtle);
    }

    .airtable-batch-description {
      font-size: 13px;
      color: var(--color-text-muted);
      margin-bottom: 16px;
    }

    .airtable-batch-controls {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 16px;
    }

    .airtable-batch-select-row {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .airtable-batch-select-row label {
      font-size: 13px;
      color: var(--color-text-muted);
      min-width: 60px;
    }

    .airtable-batch-select,
    .airtable-batch-input {
      flex: 1;
      padding: 8px 12px;
      font-size: 13px;
      border: 1px solid var(--color-border-subtle);
      border-radius: 6px;
      background: var(--color-bg);
      color: var(--color-text);
    }

    .airtable-batch-select:focus,
    .airtable-batch-input:focus {
      outline: none;
      border-color: var(--color-primary);
    }

    .airtable-batch-count {
      font-size: 13px;
      color: var(--color-text-muted);
      text-align: center;
      padding: 8px;
      background: var(--color-bg);
      border-radius: 6px;
    }

    .airtable-batch-count span {
      font-weight: 600;
      color: var(--color-primary-bright);
    }

    .airtable-btn--batch {
      width: 100%;
      background: linear-gradient(135deg, var(--color-primary), #8B5CF6);
      color: white;
      font-weight: 600;
    }

    .airtable-btn--batch:hover:not(:disabled) {
      background: linear-gradient(135deg, var(--color-primary-bright), #A78BFA);
    }

    .airtable-batch-progress {
      margin-top: 16px;
    }

    .airtable-progress-bar {
      height: 8px;
      background: var(--color-bg);
      border-radius: 4px;
      overflow: hidden;
    }

    .airtable-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--color-primary), #8B5CF6);
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .airtable-progress-text {
      font-size: 12px;
      color: var(--color-text-muted);
      text-align: center;
      margin-top: 8px;
    }

    .airtable-progress-text span {
      font-weight: 600;
      color: var(--color-text);
    }

    /* Modal Footer */
    .airtable-modal__footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 28px;
      border-top: 1px solid var(--color-border-subtle);
      background: var(--color-bg-elevated);
    }

    .airtable-modal__footer-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .airtable-back-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: transparent;
      color: var(--color-text-muted);
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-md);
      font-size: 14px;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .airtable-back-btn:hover {
      color: var(--color-text);
      border-color: var(--color-text-muted);
    }

    .airtable-back-btn svg {
      width: 16px;
      height: 16px;
    }

    .airtable-next-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: var(--color-primary);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background var(--transition-fast);
    }

    .airtable-next-btn:hover:not(:disabled) {
      background: var(--color-primary-bright);
    }

    .airtable-next-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .airtable-next-btn svg {
      width: 16px;
      height: 16px;
    }

    .airtable-next-btn.loading {
      position: relative;
      color: transparent;
    }

    .airtable-next-btn.loading::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    /* Skeleton Loading */
    .airtable-skeleton {
      background: linear-gradient(90deg, var(--color-surface) 25%, var(--color-bg-elevated) 50%, var(--color-surface) 75%);
      background-size: 200% 100%;
      animation: skeleton 1.5s ease-in-out infinite;
      border-radius: var(--radius-sm);
    }

    @keyframes skeleton {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    .airtable-skeleton--field {
      height: 32px;
      width: 100px;
      display: inline-block;
      margin: 4px;
    }

    /* Success Animation */
    .airtable-success-animation {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 40px;
      text-align: center;
    }

    .airtable-success-icon {
      width: 80px;
      height: 80px;
      background: var(--color-success);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
      animation: successPop 0.5s ease;
    }

    .airtable-success-icon svg {
      width: 40px;
      height: 40px;
      color: white;
    }

    @keyframes successPop {
      0% { transform: scale(0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .airtable-success-title {
      font-size: 24px;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: 8px;
    }

    .airtable-success-message {
      font-size: 15px;
      color: var(--color-text-muted);
      margin-bottom: 32px;
    }

    /* Toast Notifications */
    .airtable-toast {
      position: absolute;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: var(--color-bg-card);
      border: 1px solid var(--color-border);
      border-radius: 12px;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .airtable-toast.visible {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .airtable-toast svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    .airtable-toast--success svg {
      color: var(--color-success);
    }

    .airtable-toast--info svg {
      color: var(--color-primary);
    }

    .airtable-toast--error svg {
      color: #f87171;
    }

    .airtable-toast span {
      font-size: 14px;
      color: var(--color-text);
    }

    /* Connect Button in Airtable Section */
    .btn--airtable {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 14px 28px;
      background: linear-gradient(135deg, #FCBF49, #F77F00);
      color: #000;
      border: none;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: transform var(--transition-fast), box-shadow var(--transition-fast);
    }

    .btn--airtable:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(252, 191, 73, 0.4);
    }

    .btn--airtable svg {
      width: 20px;
      height: 20px;
    }

    /* Responsive Airtable Modal */
    @media (max-width: 768px) {
      .airtable-modal {
        max-height: 100vh;
        border-radius: 0;
      }

      .airtable-modal__header {
        padding: 16px 20px;
      }

      .airtable-modal__body {
        padding: 20px;
      }

      .airtable-progress {
        padding: 16px 20px;
        flex-wrap: wrap;
        gap: 16px;
      }

      .airtable-progress__connector {
        display: none;
      }

      .airtable-progress__label {
        display: none;
      }

      .airtable-styles {
        flex-direction: column;
      }

      .airtable-modal__footer {
        padding: 16px 20px;
        flex-direction: column;
        gap: 12px;
      }

      .airtable-modal__footer-left {
        width: 100%;
      }

      .airtable-back-btn {
        flex: 1;
        justify-content: center;
      }

      .airtable-next-btn {
        width: 100%;
        justify-content: center;
      }
    }

    /* ============================================
       Mobile Hamburger Menu
       ============================================ */
    .nav__hamburger {
      display: none;
      flex-direction: column;
      justify-content: center;
      gap: 5px;
      width: 36px;
      height: 36px;
      background: transparent;
      border: 1px solid var(--color-border-subtle);
      border-radius: var(--radius-sm);
      cursor: pointer;
      padding: 8px;
      transition: border-color var(--transition-fast);
    }

    .nav__hamburger:hover {
      border-color: var(--color-text-muted);
    }

    .nav__hamburger span {
      display: block;
      width: 100%;
      height: 2px;
      background: var(--color-text);
      transition: transform var(--transition-fast), opacity var(--transition-fast);
    }

    .nav__hamburger.active span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .nav__hamburger.active span:nth-child(2) {
      opacity: 0;
    }

    .nav__hamburger.active span:nth-child(3) {
      transform: rotate(-45deg) translate(5px, -5px);
    }

    .nav__mobile-menu {
      position: fixed;
      top: 70px;
      left: 0;
      right: 0;
      background: var(--color-bg-elevated);
      border-bottom: 1px solid var(--color-border-subtle);
      padding: 24px;
      transform: translateY(-100%);
      opacity: 0;
      visibility: hidden;
      transition: transform var(--transition-smooth), opacity var(--transition-smooth), visibility var(--transition-smooth);
      z-index: 99;
    }

    .nav__mobile-menu.visible {
      transform: translateY(0);
      opacity: 1;
      visibility: visible;
    }

    .nav__mobile-links {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .nav__mobile-links a {
      display: block;
      padding: 12px 16px;
      color: var(--color-text-muted);
      text-decoration: none;
      font-size: 16px;
      font-weight: 500;
      border-radius: var(--radius-sm);
      transition: background var(--transition-fast), color var(--transition-fast);
    }

    .nav__mobile-links a:hover {
      background: var(--color-surface);
      color: var(--color-text);
    }

    .nav__mobile-cta {
      display: block;
      width: 100%;
      margin-top: 16px;
      padding: 14px 24px;
      background: var(--color-primary);
      color: white;
      text-align: center;
      text-decoration: none;
      font-size: 15px;
      font-weight: 500;
      border-radius: var(--radius-md);
      transition: background var(--transition-fast);
    }

    .nav__mobile-cta:hover {
      background: var(--color-primary-bright);
    }

    @media (max-width: 768px) {
      .nav__hamburger {
        display: flex;
      }

      .nav__cta {
        display: none;
      }
    }
  </style>
</head>
<body>
  <!-- Background Effects -->
  <div class="gradient-mesh" aria-hidden="true">
    <div class="gradient-orb gradient-orb--1"></div>
    <div class="gradient-orb gradient-orb--2"></div>
    <div class="gradient-orb gradient-orb--3"></div>
  </div>
  <div class="noise-overlay" aria-hidden="true"></div>

  <!-- Navigation -->
  <nav class="nav" id="nav">
    <div class="container nav__inner">
      <a href="/" class="nav__logo">
        <span class="nav__logo-mark">G</span>
        <span class="nav__logo-text">Glyph</span>
      </a>
      <ul class="nav__links">
        <li><a href="#playground" class="nav__link">Playground</a></li>
        <li><a href="#features" class="nav__link">Features</a></li>
        <li><a href="#airtable" class="nav__link">Airtable</a></li>
        <li><a href="#pricing" class="nav__link">Pricing</a></li>
        <li><a href="/docs" class="nav__link">Docs</a></li>
      </ul>
      <a href="/dashboard" class="nav__cta">
        Get API Key
        <svg class="btn__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
        </svg>
      </a>
      <button class="nav__hamburger" id="hamburger" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div class="nav__mobile-menu" id="mobile-menu">
    <ul class="nav__mobile-links">
      <li><a href="#playground">Playground</a></li>
      <li><a href="#features">Features</a></li>
      <li><a href="#airtable">Airtable</a></li>
      <li><a href="#pricing">Pricing</a></li>
      <li><a href="/docs">Docs</a></li>
    </ul>
    <a href="/dashboard" class="nav__mobile-cta">Get API Key</a>
  </div>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero__content">
        <div class="hero__text">
          <div class="hero__badge">Now in Public Beta</div>
          <h1 class="hero__title">
            AI-Powered<br><span>PDF Customization</span>
          </h1>
          <p class="hero__subtitle">
            Let your customers personalize documents with natural language.
            Ship in minutes with just 2 lines of code.
          </p>
          <div class="hero__actions">
            <a href="#playground" class="btn btn--primary">
              Try the Playground
              <svg class="btn__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </a>
            <a href="/dashboard" class="btn btn--secondary">
              Get API Key
            </a>
          </div>
        </div>

        <div class="hero__demo">
          <div class="demo-container">
            <div class="demo-header">
              <span class="demo-dot demo-dot--red"></span>
              <span class="demo-dot demo-dot--yellow"></span>
              <span class="demo-dot demo-dot--green"></span>
            </div>
            <div class="demo-preview" id="hero-demo">
              <div class="demo-preview__content">
                <div class="demo-doc-header">
                  <div class="demo-company">Acme Corp</div>
                  <div class="demo-quote-title">Quote</div>
                </div>
                <div class="demo-meta">
                  <div class="demo-meta-item">
                    <div class="demo-meta-label">Quote #</div>
                    <div class="demo-meta-value">Q-2024-0042</div>
                  </div>
                  <div class="demo-meta-item">
                    <div class="demo-meta-label">Date</div>
                    <div class="demo-meta-value">Jan 18, 2026</div>
                  </div>
                  <div class="demo-meta-item">
                    <div class="demo-meta-label">Valid Until</div>
                    <div class="demo-meta-value">Feb 17, 2026</div>
                  </div>
                </div>
                <div class="demo-table">
                  <div class="demo-table-header">
                    <span>Description</span>
                    <span style="text-align: right">Qty</span>
                    <span style="text-align: right">Total</span>
                  </div>
                  <div class="demo-table-row">
                    <span>Enterprise License</span>
                    <span style="text-align: right">1</span>
                    <span style="text-align: right">$2,400</span>
                  </div>
                  <div class="demo-table-row">
                    <span>Premium Support</span>
                    <span style="text-align: right">12</span>
                    <span style="text-align: right">$1,200</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="demo-command">
              <svg class="demo-command__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
              </svg>
              <span class="demo-command__text" id="typing-text">Add a diagonal DRAFT watermark</span>
              <span class="demo-command__cursor"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Live Playground Section -->
  <section class="playground" id="playground">
    <div class="container">
      <div class="section-header">
        <div class="section-label">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
          </svg>
          Live Playground
        </div>
        <h2 class="section-title">Try it yourself</h2>
        <p class="section-subtitle">
          Type natural language commands to customize the document in real-time.
          No coding required.
        </p>
      </div>

      <div class="playground__editor">
        <div class="playground__toolbar">
          <div class="playground__tabs">
            <button class="playground__tab playground__tab--active" data-template="quote-modern">Modern</button>
            <button class="playground__tab" data-template="quote-professional">Professional</button>
            <button class="playground__tab" data-template="quote-bold">Bold</button>
          </div>
          <div class="playground__actions">
            <button class="btn btn--primary" id="generate-btn">
              <svg class="btn__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
              </svg>
              Generate PDF
            </button>
          </div>
        </div>

        <div class="playground__body">
          <div class="playground__input-area">
            <div class="playground__prompt">
              <label class="playground__prompt-label">What would you like to change?</label>
              <textarea
                class="playground__input"
                id="prompt-input"
                placeholder="Try something wild: 'Add a QR code for payment' or 'Make this look like Apple' or 'Add a DRAFT watermark'"
              ></textarea>
              <div class="playground__suggestions">
                <button class="playground__suggestion" data-prompt="Make this look like a Stripe invoice - clean, minimal, with their signature purple">Stripe style</button>
                <button class="playground__suggestion" data-prompt="Add a QR code in the corner for quick mobile payment">Add QR code</button>
                <button class="playground__suggestion" data-prompt="Add a diagonal watermark that says DRAFT across the page">Add watermark</button>
                <button class="playground__suggestion" data-prompt="Add payment terms: Net 30 with 2% early payment discount if paid within 10 days">Add terms</button>
                <button class="playground__suggestion" data-prompt="Add a thank you message and signature line at the bottom with the current date">Add signature</button>
                <button class="playground__suggestion" data-prompt="Add a progress bar showing 50% deposit already paid">Show progress</button>
              </div>
              <p class="playground__hint">Try something wild - the AI understands complex requests</p>
              <button class="playground__apply-btn" id="apply-btn">
                Apply Changes
              </button>
            </div>
          </div>

          <div class="playground__preview-area">
            <div class="playground__preview-label">
              Live Preview
              <span class="playground__preview-status">
                <span class="status-dot"></span>
                Ready
              </span>
            </div>
            <div class="playground__preview" id="preview-container">
              <div class="playground__loading" id="preview-loading">
                <div class="loading-spinner"></div>
                <div class="playground__loading-text">AI is updating your document...</div>
              </div>
              <iframe id="preview-frame" class="playground__preview-frame" title="Document Preview"></iframe>
            </div>
            <div class="playground__rate-notice">
              Demo limited to 10 requests/minute. Get an API key for higher limits.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features" id="features">
    <div class="container">
      <div class="section-header">
        <div class="section-label">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
          </svg>
          Features
        </div>
        <h2 class="section-title">Everything you need to ship</h2>
        <p class="section-subtitle">
          A complete toolkit for AI-powered document customization.
          Built for developers, loved by end users.
        </p>
      </div>

      <div class="features__grid">
        <!-- Natural Language Card (Highlight) -->
        <div class="feature-card feature-card--highlight">
          <div class="feature-card__content">
            <div class="feature-card__icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
              </svg>
            </div>
            <h3 class="feature-card__title">Natural Language Editing</h3>
            <p class="feature-card__description">
              Your users simply describe what they want. "Make the header teal"
              just works. No complex UI, no training required.
            </p>
          </div>
          <div class="feature-card__visual">
            <div class="code-line code-line--highlight">"Add a QR code and DRAFT watermark"</div>
            <div class="code-line" style="margin-top: 12px; color: var(--color-text-subtle);">// AI understands complex, multi-part requests</div>
            <div class="code-line" style="color: var(--color-success); margin-top: 8px;">+ QR code added: top-right corner</div>
            <div class="code-line" style="color: var(--color-success);">+ Watermark applied: 45deg diagonal</div>
          </div>
        </div>

        <!-- Templates Card -->
        <div class="feature-card">
          <div class="feature-card__icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/>
            </svg>
          </div>
          <h3 class="feature-card__title">Professional Templates</h3>
          <p class="feature-card__description">
            Start with beautiful, responsive templates. Quotes, invoices, proposals -
            all designed for real business use.
          </p>
        </div>

        <!-- Fast Generation -->
        <div class="feature-card">
          <div class="feature-card__icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
          </div>
          <h3 class="feature-card__title">Lightning Fast</h3>
          <p class="feature-card__description">
            PDFs generated in under 3 seconds. Real-time preview updates
            as your users type their requests.
          </p>
        </div>

        <!-- Tiny SDK -->
        <div class="feature-card">
          <div class="feature-card__icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
            </svg>
          </div>
          <h3 class="feature-card__title">Tiny SDK</h3>
          <p class="feature-card__description">
            Under 10KB gzipped. One script tag, one component.
            No build tools required.
          </p>
        </div>

        <!-- Secure -->
        <div class="feature-card">
          <div class="feature-card__icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
            </svg>
          </div>
          <h3 class="feature-card__title">Secure by Default</h3>
          <p class="feature-card__description">
            AI guardrails prevent data tampering. Users can customize styling,
            not manipulate protected data fields.
          </p>
        </div>

        <!-- Region Selection -->
        <div class="feature-card">
          <div class="feature-card__icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"/>
            </svg>
          </div>
          <h3 class="feature-card__title">Smart Region Selection</h3>
          <p class="feature-card__description">
            Click to select specific sections. Apply changes to just
            the header, line items, or footer.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Airtable Integration Section -->
  <section class="airtable" id="airtable">
    <div class="container">
      <div class="airtable__content">
        <div class="airtable__text">
          <h2>Works with <span>Airtable</span></h2>
          <p>
            Connect your Airtable base, describe what you want in plain English,
            and get a professional PDF template instantly. No manual field mapping.
            No template syntax to learn.
          </p>

          <div class="airtable__steps">
            <div class="airtable-step">
              <div class="airtable-step__number">1</div>
              <div class="airtable-step__content">
                <h4>Connect Your Base</h4>
                <p>Paste your Airtable API key. We read your schema automatically.</p>
              </div>
            </div>
            <div class="airtable-step">
              <div class="airtable-step__number">2</div>
              <div class="airtable-step__content">
                <h4>Describe Your Document</h4>
                <p>"Create an invoice with logo, client info, line items, and totals"</p>
              </div>
            </div>
            <div class="airtable-step">
              <div class="airtable-step__number">3</div>
              <div class="airtable-step__content">
                <h4>Iterate & Generate</h4>
                <p>"Add PO number field" - "Make the header navy blue" - Done.</p>
              </div>
            </div>
          </div>

          <button class="btn--airtable" id="connect-airtable">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
            </svg>
            Connect Your Airtable
          </button>
        </div>

        <div class="airtable__demo">
          <div class="airtable__demo-header">
            <div class="airtable__demo-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
            </div>
            <span class="airtable__demo-title">Invoices Table</span>
            <span class="airtable__demo-badge">Connected</span>
          </div>
          <div class="airtable__demo-body">
            <div class="airtable__demo-flow">
              <div class="airtable__demo-input">
                <div class="airtable__demo-input-label">Your Description</div>
                <div class="airtable__demo-input-text">
                  "Create a professional invoice with the company logo at top,
                  client info on the left, a table of line items, and totals at the bottom"
                </div>
              </div>

              <div class="airtable__demo-arrow">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
                </svg>
              </div>

              <div class="airtable__demo-output">
                <div class="airtable__demo-output-header">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                  </svg>
                  <span>Template Generated</span>
                </div>
                <div class="airtable__demo-preview">
                  <div class="airtable__demo-preview-doc">
                    <h3>INVOICE</h3>
                    <div class="meta">
                      <span>Invoice #INV-2024-001</span>
                      <span>Date: Jan 15, 2024</span>
                    </div>
                    <table>
                      <thead>
                        <tr>
                          <th>Description</th>
                          <th>Qty</th>
                          <th>Amount</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>Web Design Services</td>
                          <td>1</td>
                          <td>$2,500</td>
                        </tr>
                        <tr>
                          <td>Development Hours</td>
                          <td>40</td>
                          <td>$4,000</td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="total">Total: $6,500</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Integration Section -->
  <section class="integration" id="integration">
    <div class="container">
      <div class="integration__content">
        <div class="integration__text">
          <h2>Works with<br>any framework</h2>
          <p>
            Drop in a single script tag and web component. Works with React,
            Vue, Svelte, or vanilla HTML. No complex setup required.
          </p>
          <div class="framework-badges">
            <span class="framework-badge">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z"/></svg>
              React
            </span>
            <span class="framework-badge">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M24,1.61H6.24L6,1.61l-.12.05-.05,0-.1.1L0,12.27,5.76,22.95l.08.11.05.05.1.07.1,0H6.24L18.4,22.55h0l.13-.1h0l.1-.11L24,12.27ZM6.39,20.5l-4-8.23,4-8.23,13.33-1.64ZM7.08,4l12.23,5.54L19,17.72ZM17,17.94l-8.91.89L16.5,8.55l2.29,9.14Z"/></svg>
              Vue
            </span>
            <span class="framework-badge">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10.354 21.125a4.44 4.44 0 0 1-4.765-1.767 4.109 4.109 0 0 1-.703-3.107 3.898 3.898 0 0 1 .134-.522l.105-.321.287.21a7.21 7.21 0 0 0 2.186 1.092l.208.063-.02.208a1.253 1.253 0 0 0 .226.83 1.337 1.337 0 0 0 1.435.533 1.231 1.231 0 0 0 .343-.15l5.59-3.562a1.164 1.164 0 0 0 .524-.778 1.242 1.242 0 0 0-.211-.937 1.338 1.338 0 0 0-1.435-.533 1.23 1.23 0 0 0-.343.15l-2.133 1.36a4.078 4.078 0 0 1-1.135.499 4.44 4.44 0 0 1-4.765-1.766 4.108 4.108 0 0 1-.702-3.108 3.855 3.855 0 0 1 1.742-2.582l5.589-3.563a4.072 4.072 0 0 1 1.135-.499 4.44 4.44 0 0 1 4.765 1.767 4.109 4.109 0 0 1 .703 3.107 3.943 3.943 0 0 1-.134.522l-.105.321-.286-.21a7.204 7.204 0 0 0-2.187-1.093l-.208-.063.02-.207a1.255 1.255 0 0 0-.226-.831 1.337 1.337 0 0 0-1.435-.532 1.231 1.231 0 0 0-.343.15L8.62 9.368a1.162 1.162 0 0 0-.524.778 1.243 1.243 0 0 0 .212.936 1.338 1.338 0 0 0 1.435.533 1.235 1.235 0 0 0 .343-.15l2.133-1.36a4.067 4.067 0 0 1 1.135-.498 4.44 4.44 0 0 1 4.765 1.766 4.108 4.108 0 0 1 .702 3.108 3.857 3.857 0 0 1-1.742 2.583l-5.589 3.562a4.072 4.072 0 0 1-1.136.498z"/></svg>
              Svelte
            </span>
            <span class="framework-badge">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"/></svg>
              HTML
            </span>
          </div>
        </div>

        <div class="integration__code">
          <div class="code-tabs">
            <button class="code-tab code-tab--active" data-lang="html">HTML</button>
            <button class="code-tab" data-lang="react">React</button>
            <button class="code-tab" data-lang="vue">Vue</button>
          </div>
          <div class="code-content">
            <div class="code-block code-block--active" id="code-html">
              <pre><code><span class="code-comment">&lt;!-- Include the SDK --&gt;</span>
<span class="code-tag">&lt;script</span> <span class="code-attr">src</span>=<span class="code-string">"https://glyph-sdk.vercel.app/glyph.min.js"</span><span class="code-tag">&gt;&lt;/script&gt;</span>

<span class="code-comment">&lt;!-- Add the editor component --&gt;</span>
<span class="code-tag">&lt;glyph-editor</span>
  <span class="code-attr">api-key</span>=<span class="code-string">"gk_your_api_key"</span>
  <span class="code-attr">template</span>=<span class="code-string">"quote-modern"</span>
  <span class="code-attr">:data</span>=<span class="code-string">"quoteData"</span>
<span class="code-tag">/&gt;</span></code></pre>
            </div>
            <div class="code-block" id="code-react">
              <pre><code><span class="code-keyword">import</span> { GlyphEditor } <span class="code-keyword">from</span> <span class="code-string">'@glyph-so/react'</span>

<span class="code-keyword">function</span> <span class="code-tag">QuoteEditor</span>() {
  <span class="code-keyword">return</span> (
    <span class="code-tag">&lt;GlyphEditor</span>
      <span class="code-attr">apiKey</span>=<span class="code-string">"gk_your_api_key"</span>
      <span class="code-attr">template</span>=<span class="code-string">"quote-modern"</span>
      <span class="code-attr">data</span>={quoteData}
    <span class="code-tag">/&gt;</span>
  )
}</code></pre>
            </div>
            <div class="code-block" id="code-vue">
              <pre><code><span class="code-tag">&lt;template&gt;</span>
  <span class="code-tag">&lt;GlyphEditor</span>
    <span class="code-attr">api-key</span>=<span class="code-string">"gk_your_api_key"</span>
    <span class="code-attr">template</span>=<span class="code-string">"quote-modern"</span>
    <span class="code-attr">:data</span>=<span class="code-string">"quoteData"</span>
  <span class="code-tag">/&gt;</span>
<span class="code-tag">&lt;/template&gt;</span>

<span class="code-tag">&lt;script setup&gt;</span>
<span class="code-keyword">import</span> { GlyphEditor } <span class="code-keyword">from</span> <span class="code-string">'@glyph-so/vue'</span>
<span class="code-tag">&lt;/script&gt;</span></code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing Section -->
  <section class="pricing" id="pricing">
    <div class="container">
      <div class="section-header">
        <div class="section-label">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          Pricing
        </div>
        <h2 class="section-title">Simple, transparent pricing</h2>
        <p class="section-subtitle">
          Start free. Scale as you grow. No hidden fees or surprises.
        </p>
      </div>

      <div class="pricing__grid">
        <!-- Free Tier -->
        <div class="pricing-card">
          <div class="pricing-card__name">Free</div>
          <div class="pricing-card__price">$0<span>/mo</span></div>
          <div class="pricing-card__description">Perfect for trying things out</div>
          <ul class="pricing-card__features">
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              100 PDFs per month
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              10 requests per minute
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              All 3 templates
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Community support
            </li>
          </ul>
          <a href="/dashboard" class="btn btn--secondary">Get Started</a>
        </div>

        <!-- Pro Tier -->
        <div class="pricing-card pricing-card--popular">
          <div class="pricing-card__name">Pro</div>
          <div class="pricing-card__price">$29<span>/mo</span></div>
          <div class="pricing-card__description">For growing businesses</div>
          <ul class="pricing-card__features">
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              1,000 PDFs per month
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              60 requests per minute
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Custom branding
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Email support
            </li>
          </ul>
          <a href="/dashboard" class="btn btn--primary">Get Started</a>
        </div>

        <!-- Scale Tier -->
        <div class="pricing-card">
          <div class="pricing-card__name">Scale</div>
          <div class="pricing-card__price">$99<span>/mo</span></div>
          <div class="pricing-card__description">For high-volume needs</div>
          <ul class="pricing-card__features">
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              10,000 PDFs per month
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              120 requests per minute
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Custom templates
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Priority support
            </li>
          </ul>
          <a href="/dashboard" class="btn btn--secondary">Get Started</a>
        </div>

        <!-- Enterprise Tier -->
        <div class="pricing-card">
          <div class="pricing-card__name">Enterprise</div>
          <div class="pricing-card__price">Custom</div>
          <div class="pricing-card__description">For large organizations</div>
          <ul class="pricing-card__features">
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Unlimited PDFs
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Dedicated infrastructure
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Custom AI training
            </li>
            <li>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              SLA & dedicated support
            </li>
          </ul>
          <a href="mailto:hello@glyph.so" class="btn btn--secondary">Contact Sales</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer__content">
        <div class="footer__brand">
          <a href="/" class="footer__logo">
            <span class="footer__logo-mark">G</span>
            <span class="footer__logo-text">Glyph</span>
          </a>
          <p class="footer__tagline">
            AI-powered PDF customization. Let your customers personalize documents
            with natural language. Ship in minutes.
          </p>
        </div>

        <div class="footer__column">
          <h4>Product</h4>
          <ul>
            <li><a href="#features">Features</a></li>
            <li><a href="#pricing">Pricing</a></li>
            <li><a href="#playground">Playground</a></li>
            <li><a href="/changelog">Changelog</a></li>
          </ul>
        </div>

        <div class="footer__column">
          <h4>Resources</h4>
          <ul>
            <li><a href="/docs">Documentation</a></li>
            <li><a href="/docs/api">API Reference</a></li>
            <li><a href="https://github.com/glyph-so/glyph">GitHub</a></li>
            <li><a href="/examples">Examples</a></li>
          </ul>
        </div>

        <div class="footer__column">
          <h4>Company</h4>
          <ul>
            <li><a href="/about">About</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/privacy">Privacy</a></li>
            <li><a href="/terms">Terms</a></li>
          </ul>
        </div>
      </div>

      <div class="footer__bottom">
        <p class="footer__copyright">
          Built by Eddie San Juan. All rights reserved.
        </p>
        <div class="footer__social">
          <a href="https://github.com/glyph-so" aria-label="GitHub">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          </a>
          <a href="https://twitter.com/glyph_so" aria-label="Twitter">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
          </a>
          <a href="https://discord.gg/glyph" aria-label="Discord">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Airtable Connection Modal -->
  <div class="airtable-modal-overlay" id="airtable-modal-overlay">
    <div class="airtable-modal">
      <!-- Header -->
      <div class="airtable-modal__header">
        <div class="airtable-modal__header-left">
          <div class="airtable-modal__icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
            </svg>
          </div>
          <div>
            <div class="airtable-modal__title">Connect Airtable</div>
            <div class="airtable-modal__subtitle">Generate templates from your data</div>
          </div>
        </div>
        <button class="airtable-modal__close" id="airtable-modal-close">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <!-- Progress Steps -->
      <div class="airtable-progress">
        <div class="airtable-progress__step active" data-step="1">
          <div class="airtable-progress__number">1</div>
          <span class="airtable-progress__label">Connect</span>
        </div>
        <div class="airtable-progress__connector"></div>
        <div class="airtable-progress__step" data-step="2">
          <div class="airtable-progress__number">2</div>
          <span class="airtable-progress__label">Select Data</span>
        </div>
        <div class="airtable-progress__connector"></div>
        <div class="airtable-progress__step" data-step="3">
          <div class="airtable-progress__number">3</div>
          <span class="airtable-progress__label">Describe</span>
        </div>
        <div class="airtable-progress__connector"></div>
        <div class="airtable-progress__step" data-step="4">
          <div class="airtable-progress__number">4</div>
          <span class="airtable-progress__label">Preview</span>
        </div>
      </div>

      <!-- Body -->
      <div class="airtable-modal__body">
        <!-- Step 1: Enter API Key -->
        <div class="airtable-step-content active" data-step="1">
          <h3 class="airtable-step__title">Connect Your Airtable</h3>
          <p class="airtable-step__description">
            Enter your Airtable Personal Access Token to get started. We'll read your bases and tables automatically.
          </p>

          <div class="airtable-input-group">
            <label class="airtable-input-label" for="airtable-key">Personal Access Token</label>
            <input
              type="password"
              class="airtable-input"
              id="airtable-key"
              placeholder="pat..."
              autocomplete="off"
            />
            <div class="airtable-input-hint">
              <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <a href="https://airtable.com/create/tokens" target="_blank" rel="noopener">Get your API token from Airtable</a>
            </div>
          </div>

          <div class="airtable-info-card" style="margin-top: 24px;">
            <div class="airtable-info-card__title">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
              </svg>
              Your data is secure
            </div>
            <div class="airtable-data-preview">
              Your API key is used client-side only and is never stored on our servers.
              We only read your schema and sample data to generate templates.
            </div>
          </div>
        </div>

        <!-- Step 2: Select Base & Table -->
        <div class="airtable-step-content" data-step="2">
          <h3 class="airtable-step__title">Choose Your Data</h3>
          <p class="airtable-step__description">
            Select the base and table you want to create a template for.
          </p>

          <div class="airtable-input-group">
            <label class="airtable-input-label" for="airtable-base">Base</label>
            <select class="airtable-select" id="airtable-base" disabled>
              <option value="">Select a base...</option>
            </select>
          </div>

          <div class="airtable-input-group">
            <label class="airtable-input-label" for="airtable-table">Table</label>
            <select class="airtable-select" id="airtable-table" disabled>
              <option value="">Select a table...</option>
            </select>
          </div>

          <div class="airtable-fields" id="airtable-fields" style="display: none;">
            <div class="airtable-fields__title">Available Fields</div>
            <div id="airtable-fields-list">
              <!-- Fields will be populated dynamically -->
            </div>
          </div>
        </div>

        <!-- Step 3: Describe Your Document -->
        <div class="airtable-step-content" data-step="3">
          <h3 class="airtable-step__title">Describe Your Document</h3>
          <p class="airtable-step__description">
            Tell us what kind of document you want to create. Be specific about layout, styling, and which fields to include.
          </p>

          <div class="airtable-input-group">
            <label class="airtable-input-label" for="airtable-description">Document Description</label>
            <textarea
              class="airtable-textarea"
              id="airtable-description"
              placeholder="Create a professional invoice with the company logo at top, client info on the left, a table of line items with description, quantity, and price columns, and totals at the bottom. Use a clean, modern design with teal accents."
            ></textarea>
          </div>

          <div class="airtable-input-group">
            <label class="airtable-input-label">Style Preset</label>
            <div class="airtable-styles">
              <button class="airtable-style-btn selected" data-style="modern">
                <div class="airtable-style-btn__icon">&#9632;</div>
                Modern
              </button>
              <button class="airtable-style-btn" data-style="professional">
                <div class="airtable-style-btn__icon">&#9633;</div>
                Professional
              </button>
              <button class="airtable-style-btn" data-style="minimal">
                <div class="airtable-style-btn__icon">&#9675;</div>
                Minimal
              </button>
            </div>
          </div>

          <div class="airtable-info-card" style="margin-top: 24px;" id="selected-fields-info">
            <div class="airtable-info-card__title">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
              </svg>
              Selected Table Fields
            </div>
            <div class="airtable-data-preview" id="step3-fields-preview">
              <!-- Fields will be shown here -->
            </div>
          </div>
        </div>

        <!-- Step 4: Preview & Iterate -->
        <div class="airtable-step-content" data-step="4">
          <div class="airtable-preview-container">
            <div class="airtable-preview-left">
              <div class="airtable-preview-frame-wrapper">
                <div class="airtable-preview-loading" id="airtable-preview-loading">
                  <div class="loading-spinner"></div>
                  <div class="airtable-preview-loading__text">
                    <span class="airtable-ai-typing">
                      AI is generating your template
                      <span class="airtable-ai-typing__dot"></span>
                      <span class="airtable-ai-typing__dot"></span>
                      <span class="airtable-ai-typing__dot"></span>
                    </span>
                  </div>
                  <div class="airtable-preview-loading__subtext">This may take a few seconds</div>
                </div>
                <iframe id="airtable-preview-frame" class="airtable-preview-frame" title="Template Preview"></iframe>
              </div>
              <div class="airtable-refine">
                <input
                  type="text"
                  class="airtable-refine-input"
                  id="airtable-refine-input"
                  placeholder="Add the PO number field..."
                />
                <button class="airtable-refine-btn" id="airtable-refine-btn">Refine</button>
              </div>
            </div>
            <div class="airtable-preview-right">
              <div class="airtable-info-card">
                <div class="airtable-info-card__title">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                  </svg>
                  Data Preview
                </div>
                <div class="airtable-data-preview" id="airtable-data-preview">
                  <!-- Data preview will be populated -->
                </div>
              </div>

              <div class="airtable-info-card">
                <div class="airtable-info-card__title">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                  </svg>
                  Template Info
                </div>
                <div class="airtable-data-preview">
                  <div class="airtable-data-row">
                    <span class="airtable-data-label">Base</span>
                    <span class="airtable-data-value" id="info-base">-</span>
                  </div>
                  <div class="airtable-data-row">
                    <span class="airtable-data-label">Table</span>
                    <span class="airtable-data-value" id="info-table">-</span>
                  </div>
                  <div class="airtable-data-row">
                    <span class="airtable-data-label">Style</span>
                    <span class="airtable-data-value" id="info-style">Modern</span>
                  </div>
                </div>
              </div>

              <div class="airtable-actions">
                <button class="airtable-btn airtable-btn--primary" id="airtable-download-pdf">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                  </svg>
                  Download PDF
                </button>
                <button class="airtable-btn airtable-btn--secondary" id="airtable-save-template">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
                  </svg>
                  Save Template
                </button>
              </div>

              <!-- Batch Generation Section -->
              <div class="airtable-batch-section">
                <div class="airtable-info-card__title">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                  </svg>
                  Batch Generate
                </div>
                <p class="airtable-batch-description">Generate PDFs for all records in your table at once</p>

                <div class="airtable-batch-controls">
                  <div class="airtable-batch-select-row">
                    <label for="batch-view-select">View:</label>
                    <select id="batch-view-select" class="airtable-batch-select">
                      <option value="">All records</option>
                    </select>
                  </div>

                  <div class="airtable-batch-select-row">
                    <label for="batch-filename">Filename:</label>
                    <input type="text" id="batch-filename" class="airtable-batch-input" placeholder="invoice-{{fields.Invoice Number}}.pdf" />
                  </div>

                  <div class="airtable-batch-count">
                    <span id="batch-record-count">0</span> records will be generated
                  </div>
                </div>

                <button class="airtable-btn airtable-btn--batch" id="batch-generate-btn" disabled>
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                  </svg>
                  <span id="batch-btn-text">Generate All PDFs</span>
                </button>

                <div class="airtable-batch-progress" id="batch-progress" style="display: none;">
                  <div class="airtable-progress-bar">
                    <div class="airtable-progress-fill" id="batch-progress-fill" style="width: 0%"></div>
                  </div>
                  <div class="airtable-progress-text">
                    <span id="batch-completed">0</span> / <span id="batch-total">0</span> complete
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="airtable-modal__footer">
        <div class="airtable-modal__footer-left">
          <button class="airtable-back-btn" id="airtable-back-btn" style="display: none;">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            Back
          </button>
        </div>
        <button class="airtable-next-btn" id="airtable-next-btn" disabled>
          Connect
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal for API Key Prompt -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal">
      <div class="modal__icon">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
        </svg>
      </div>
      <h3 class="modal__title">Get Your API Key</h3>
      <p class="modal__description">
        PDF generation requires an API key. Sign up for free to generate unlimited PDFs and customize your documents with AI.
      </p>
      <div class="modal__actions">
        <button class="modal__btn modal__btn--secondary" id="modal-close">Maybe Later</button>
        <a href="/dashboard" class="modal__btn modal__btn--primary">Get Free API Key</a>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // ============================================
    // Configuration
    // ============================================
    const API_URL = window.location.hostname === 'localhost'
      ? 'http://localhost:3000'
      : 'https://glyph-api-production-3f73.up.railway.app';
    const DEMO_API_KEY = 'gk_demo_playground_2024'; // Demo key for playground

    // Current state
    let currentTemplate = 'quote-modern';
    let currentHtml = '';
    let sessionId = null;

    // ============================================
    // Navigation Scroll Effect
    // ============================================
    const nav = document.getElementById('nav');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        nav.classList.add('scrolled');
      } else {
        nav.classList.remove('scrolled');
      }
    });

    // ============================================
    // Hero Demo Animation
    // ============================================
    const typingText = document.getElementById('typing-text');
    const heroDemo = document.getElementById('hero-demo');
    const commands = [
      { text: 'Add a diagonal DRAFT watermark', color: '#14B8A6', effect: 'watermark' },
      { text: 'Make this look like a Stripe invoice', color: '#635BFF', effect: 'stripe' },
      { text: 'Add a QR code for instant payment', color: '#14B8A6', effect: 'qrcode' },
      { text: 'Add payment terms: Net 30', color: '#22C55E', effect: 'terms' },
      { text: 'Add a signature line with date', color: '#F97316', effect: 'signature' }
    ];
    let commandIndex = 0;
    let charIndex = 0;
    let isDeleting = false;

    function typeCommand() {
      const command = commands[commandIndex];

      if (!isDeleting) {
        typingText.textContent = command.text.substring(0, charIndex + 1);
        charIndex++;

        if (charIndex === command.text.length) {
          setTimeout(() => {
            heroDemo.style.setProperty('--demo-accent', command.color);
          }, 300);

          setTimeout(() => {
            isDeleting = true;
            typeCommand();
          }, 2000);
          return;
        }
      } else {
        typingText.textContent = command.text.substring(0, charIndex - 1);
        charIndex--;

        if (charIndex === 0) {
          isDeleting = false;
          commandIndex = (commandIndex + 1) % commands.length;
        }
      }

      setTimeout(typeCommand, isDeleting ? 30 : 80);
    }

    setTimeout(typeCommand, 1000);

    // ============================================
    // Code Tab Switching
    // ============================================
    const codeTabs = document.querySelectorAll('.code-tab');
    const codeBlocks = document.querySelectorAll('.code-block');

    codeTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const lang = tab.dataset.lang;

        codeTabs.forEach(t => t.classList.remove('code-tab--active'));
        codeBlocks.forEach(b => b.classList.remove('code-block--active'));

        tab.classList.add('code-tab--active');
        document.getElementById(`code-${lang}`).classList.add('code-block--active');
      });
    });

    // ============================================
    // Playground - The Main Attraction
    // ============================================
    const playgroundTabs = document.querySelectorAll('.playground__tab');
    const promptInput = document.getElementById('prompt-input');
    const suggestions = document.querySelectorAll('.playground__suggestion');
    const applyBtn = document.getElementById('apply-btn');
    const generateBtn = document.getElementById('generate-btn');
    const previewFrame = document.getElementById('preview-frame');
    const previewContainer = document.getElementById('preview-container');
    const previewLoading = document.getElementById('preview-loading');
    const previewStatus = document.querySelector('.playground__preview-status');

    // Sample quote data for demo
    const sampleQuoteData = {
      branding: {
        companyName: 'Acme Corporation',
        companyAddress: '123 Business Ave, Suite 100\nSan Francisco, CA 94102',
        logoUrl: ''
      },
      meta: {
        quoteNumber: 'Q-2024-0042',
        date: 'January 18, 2026',
        validUntil: 'February 17, 2026',
        notes: 'Thank you for your business! Payment due within 30 days.',
        terms: 'Terms: Net 30 days. All prices in USD.'
      },
      client: {
        name: 'John Smith',
        company: 'TechStart Inc.',
        email: 'john@techstart.io',
        address: '456 Startup Lane\nPalo Alto, CA 94301'
      },
      lineItems: [
        { description: 'Enterprise License', details: 'Annual subscription with all features', quantity: 1, unitPrice: 2400.00, total: 2400.00 },
        { description: 'Premium Support', details: '24/7 dedicated support channel', quantity: 12, unitPrice: 100.00, total: 1200.00 }
      ],
      totals: {
        subtotal: 3600.00,
        tax: 0,
        discount: 0,
        total: 3600.00
      },
      styles: {
        accentColor: '#14B8A6'
      }
    };

    // Initialize preview with HTML
    async function initializePreview() {
      setStatus('Loading...');

      try {
        const response = await fetch(`${API_URL}/v1/preview`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${DEMO_API_KEY}`
          },
          body: JSON.stringify({
            template: currentTemplate,
            data: sampleQuoteData
          })
        });

        if (!response.ok) {
          throw new Error('Failed to load preview');
        }

        const data = await response.json();
        currentHtml = data.html;
        sessionId = data.sessionId;

        renderPreview(currentHtml);
        setStatus('Ready');
      } catch (err) {
        console.warn('API not available, using static demo:', err);
        renderStaticDemo();
        setStatus('Demo Mode');
      }
    }

    // Render HTML in iframe
    function renderPreview(html) {
      const doc = previewFrame.contentDocument || previewFrame.contentWindow.document;
      doc.open();
      doc.write(html);
      doc.close();
    }

    // Static demo fallback when API is not available
    function renderStaticDemo() {
      const staticHtml = generateStaticHtml(sampleQuoteData, '#14B8A6');
      currentHtml = staticHtml;
      renderPreview(staticHtml);
    }

    // Generate static HTML for demo mode
    function generateStaticHtml(data, accentColor) {
      return `<!DOCTYPE html>
<html>
<head>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: system-ui, sans-serif; font-size: 12px; color: #1a1a1a; padding: 32px; }
  .header { display: flex; justify-content: space-between; align-items: flex-start; padding-bottom: 20px; border-bottom: 2px solid ${accentColor}; margin-bottom: 20px; }
  .company { font-size: 18px; font-weight: 700; color: ${accentColor}; }
  .company-address { font-size: 11px; color: #666; margin-top: 4px; white-space: pre-line; }
  .title { font-size: 24px; font-weight: 700; color: ${accentColor}; text-transform: uppercase; letter-spacing: 0.05em; }
  .meta { display: flex; gap: 32px; background: #f9fafb; padding: 16px 20px; border-radius: 8px; margin-bottom: 24px; }
  .meta-item { text-align: center; }
  .meta-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; color: #666; margin-bottom: 4px; }
  .meta-value { font-weight: 600; }
  .client { margin-bottom: 24px; }
  .client-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: #666; margin-bottom: 8px; font-weight: 600; }
  .client-name { font-weight: 600; font-size: 14px; }
  .client-company { color: #666; margin-top: 4px; }
  .client-email { color: #666; font-size: 11px; }
  table { width: 100%; border-collapse: collapse; }
  th { background: ${accentColor}; color: white; padding: 10px 12px; text-align: left; font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600; }
  th:nth-child(2), th:nth-child(3), th:nth-child(4) { text-align: right; }
  td { padding: 12px; border-bottom: 1px solid #e5e5e5; vertical-align: top; }
  td:nth-child(2), td:nth-child(3), td:nth-child(4) { text-align: right; }
  .item-desc { font-weight: 500; }
  .item-details { font-size: 11px; color: #666; margin-top: 4px; }
  .totals { display: flex; justify-content: flex-end; margin-top: 20px; }
  .totals-table { width: 200px; }
  .totals-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e5e5e5; }
  .totals-row.total { border-top: 2px solid ${accentColor}; border-bottom: none; padding-top: 10px; margin-top: 4px; }
  .totals-label { color: #666; }
  .totals-value { font-weight: 500; }
  .totals-row.total .totals-label, .totals-row.total .totals-value { font-weight: 700; color: ${accentColor}; }
</style>
</head>
<body>
  <div class="header">
    <div>
      <div class="company">${data.branding.companyName}</div>
      <div class="company-address">${data.branding.companyAddress}</div>
    </div>
    <div class="title">Quote</div>
  </div>

  <div class="meta">
    <div class="meta-item">
      <div class="meta-label">Quote Number</div>
      <div class="meta-value">${data.meta.quoteNumber}</div>
    </div>
    <div class="meta-item">
      <div class="meta-label">Date</div>
      <div class="meta-value">${data.meta.date}</div>
    </div>
    <div class="meta-item">
      <div class="meta-label">Valid Until</div>
      <div class="meta-value">${data.meta.validUntil}</div>
    </div>
  </div>

  <div class="client">
    <div class="client-label">Prepared For</div>
    <div class="client-name">${data.client.name}</div>
    <div class="client-company">${data.client.company}</div>
    <div class="client-email">${data.client.email}</div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Description</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      ${data.lineItems.map(item => `
      <tr>
        <td>
          <div class="item-desc">${item.description}</div>
          <div class="item-details">${item.details}</div>
        </td>
        <td>${item.quantity}</td>
        <td>$${item.unitPrice}</td>
        <td>$${item.total}</td>
      </tr>
      `).join('')}
    </tbody>
  </table>

  <div class="totals">
    <div class="totals-table">
      <div class="totals-row">
        <span class="totals-label">Subtotal</span>
        <span class="totals-value">$${data.totals.subtotal}</span>
      </div>
      <div class="totals-row total">
        <span class="totals-label">Total</span>
        <span class="totals-value">$${data.totals.total}</span>
      </div>
    </div>
  </div>
</body>
</html>`;
    }

    // Set status indicator
    function setStatus(text) {
      previewStatus.innerHTML = `<span class="status-dot"></span>${text}`;
    }

    // Show/hide loading with animated progress messages
    const loadingMessages = [
      'Understanding your request...',
      'Analyzing document structure...',
      'Applying your changes...',
      'Almost there...'
    ];
    let loadingMessageInterval = null;

    function showLoading(show) {
      previewLoading.classList.toggle('visible', show);
      const loadingText = previewLoading.querySelector('.playground__loading-text');

      if (show) {
        let msgIndex = 0;
        loadingText.textContent = loadingMessages[0];

        // Cycle through messages every 800ms for perceived speed
        loadingMessageInterval = setInterval(() => {
          msgIndex = (msgIndex + 1) % loadingMessages.length;
          loadingText.textContent = loadingMessages[msgIndex];
        }, 800);
      } else {
        if (loadingMessageInterval) {
          clearInterval(loadingMessageInterval);
          loadingMessageInterval = null;
        }
      }
    }

    // Apply modifications via API
    async function applyModifications(prompt) {
      if (!prompt.trim()) return;

      showLoading(true);
      setStatus('Applying...');
      applyBtn.classList.add('loading');
      applyBtn.disabled = true;

      const startTime = Date.now();

      try {
        // Try session-based modification if we have sessionId
        if (sessionId) {
          const response = await fetch(`${API_URL}/v1/modify`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${DEMO_API_KEY}`
            },
            body: JSON.stringify({
              sessionId,
              prompt
            })
          });

          if (response.ok) {
            const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);
            const data = await response.json();
            currentHtml = data.html;
            renderPreview(currentHtml);

            // Success animation
            previewContainer.classList.add('success');
            setTimeout(() => previewContainer.classList.remove('success'), 500);

            setStatus(`Done in ${elapsed}s`);
            console.log(`[Glyph] Modification completed in ${elapsed}s`);
            setTimeout(() => setStatus('Ready'), 2000);
            return;
          }
        }

        // Fallback to direct modification
        const response = await fetch(`${API_URL}/v1/modify`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${DEMO_API_KEY}`
          },
          body: JSON.stringify({
            html: currentHtml,
            instruction: prompt
          })
        });

        if (!response.ok) {
          throw new Error('Modification failed');
        }

        const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);
        const data = await response.json();
        currentHtml = data.html;
        renderPreview(currentHtml);

        previewContainer.classList.add('success');
        setTimeout(() => previewContainer.classList.remove('success'), 500);

        setStatus(`Done in ${elapsed}s`);
        console.log(`[Glyph] Modification completed in ${elapsed}s`);
        setTimeout(() => setStatus('Ready'), 2000);

      } catch (err) {
        console.warn('API modification failed, using local simulation:', err);
        simulateModification(prompt);
      } finally {
        showLoading(false);
        applyBtn.classList.remove('loading');
        applyBtn.disabled = false;
      }
    }

    // Inject watermark into existing HTML without replacing content
    function injectWatermark(html, text = 'DRAFT') {
      if (html.includes('glyph-watermark')) {
        // Update existing watermark text
        return html.replace(/(<div class="glyph-watermark"[^>]*>)[^<]*(<\/div>)/i, `$1${text}$2`);
      }
      const watermarkStyle = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-45deg);
        font-size: 100px;
        font-weight: 900;
        color: rgba(0, 0, 0, 0.07);
        pointer-events: none;
        white-space: nowrap;
        z-index: 1000;
        letter-spacing: 20px;
        user-select: none;
      `.replace(/\n\s*/g, ' ');
      const watermarkDiv = `<div class="glyph-watermark" style="${watermarkStyle}">${text}</div>`;
      return html.replace('</body>', `${watermarkDiv}</body>`);
    }

    // Inject QR code into existing HTML without replacing content
    function injectQrCode(html) {
      if (html.includes('glyph-qr-code')) return html;
      const qrStyle = `
        position: fixed;
        top: 20px;
        right: 20px;
        width: 80px;
        height: 100px;
        background: white;
        border: 1px solid #e5e5e5;
        border-radius: 8px;
        padding: 8px;
        text-align: center;
        font-family: sans-serif;
        font-size: 8px;
        color: #666;
        z-index: 999;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      `.replace(/\n\s*/g, ' ');
      const qrSvg = `<svg viewBox="0 0 64 64" style="width:60px;height:60px;"><rect fill="#000" x="0" y="0" width="8" height="8"/><rect fill="#000" x="8" y="0" width="8" height="8"/><rect fill="#000" x="16" y="0" width="8" height="8"/><rect fill="#000" x="24" y="0" width="8" height="8"/><rect fill="#000" x="32" y="0" width="8" height="8"/><rect fill="#000" x="40" y="0" width="8" height="8"/><rect fill="#000" x="48" y="0" width="8" height="8"/><rect fill="#000" x="0" y="8" width="8" height="8"/><rect fill="#000" x="48" y="8" width="8" height="8"/><rect fill="#000" x="0" y="16" width="8" height="8"/><rect fill="#000" x="16" y="16" width="8" height="8"/><rect fill="#000" x="24" y="16" width="8" height="8"/><rect fill="#000" x="32" y="16" width="8" height="8"/><rect fill="#000" x="48" y="16" width="8" height="8"/><rect fill="#000" x="0" y="24" width="8" height="8"/><rect fill="#000" x="16" y="24" width="8" height="8"/><rect fill="#000" x="24" y="24" width="8" height="8"/><rect fill="#000" x="32" y="24" width="8" height="8"/><rect fill="#000" x="48" y="24" width="8" height="8"/><rect fill="#000" x="0" y="32" width="8" height="8"/><rect fill="#000" x="16" y="32" width="8" height="8"/><rect fill="#000" x="24" y="32" width="8" height="8"/><rect fill="#000" x="32" y="32" width="8" height="8"/><rect fill="#000" x="48" y="32" width="8" height="8"/><rect fill="#000" x="0" y="40" width="8" height="8"/><rect fill="#000" x="48" y="40" width="8" height="8"/><rect fill="#000" x="0" y="48" width="8" height="8"/><rect fill="#000" x="8" y="48" width="8" height="8"/><rect fill="#000" x="16" y="48" width="8" height="8"/><rect fill="#000" x="24" y="48" width="8" height="8"/><rect fill="#000" x="32" y="48" width="8" height="8"/><rect fill="#000" x="40" y="48" width="8" height="8"/><rect fill="#000" x="48" y="48" width="8" height="8"/></svg>`;
      const qrDiv = `<div class="glyph-qr-code" style="${qrStyle}">${qrSvg}<div style="margin-top:4px;">Scan to pay</div></div>`;
      return html.replace('</body>', `${qrDiv}</body>`);
    }

    // Change accent color in existing HTML
    function changeAccentColor(html, newColor) {
      // Replace CSS variable
      html = html.replace(/--accent-color:\s*[^;]+;/g, `--accent-color: ${newColor};`);
      // Replace inline accent colors (common patterns)
      html = html.replace(/background(-color)?:\s*#14B8A6/gi, `background$1: ${newColor}`);
      html = html.replace(/border(-color)?:\s*#14B8A6/gi, `border$1: ${newColor}`);
      html = html.replace(/color:\s*#14B8A6/gi, `color: ${newColor}`);
      return html;
    }

    // Simulate modification for demo when API unavailable - MODIFIES existing HTML instead of regenerating
    function simulateModification(prompt) {
      const lowPrompt = prompt.toLowerCase();
      let modifiedHtml = currentHtml; // START WITH EXISTING HTML - DON'T REGENERATE

      // Detect and apply watermark
      if (lowPrompt.includes('watermark')) {
        let watermarkText = 'DRAFT';
        if (lowPrompt.includes('paid')) watermarkText = 'PAID';
        else if (lowPrompt.includes('confidential')) watermarkText = 'CONFIDENTIAL';
        else if (lowPrompt.includes('approved')) watermarkText = 'APPROVED';
        else if (lowPrompt.includes('void')) watermarkText = 'VOID';
        else if (lowPrompt.includes('sample')) watermarkText = 'SAMPLE';
        modifiedHtml = injectWatermark(modifiedHtml, watermarkText);
      }

      // Detect and apply QR code
      if (lowPrompt.includes('qr')) {
        modifiedHtml = injectQrCode(modifiedHtml);
      }

      // Detect and apply color changes
      if (lowPrompt.includes('blue')) {
        modifiedHtml = changeAccentColor(modifiedHtml, '#3B82F6');
      } else if (lowPrompt.includes('purple') || lowPrompt.includes('stripe')) {
        modifiedHtml = changeAccentColor(modifiedHtml, '#635BFF');
      } else if (lowPrompt.includes('red')) {
        modifiedHtml = changeAccentColor(modifiedHtml, '#EF4444');
      } else if (lowPrompt.includes('green')) {
        modifiedHtml = changeAccentColor(modifiedHtml, '#22C55E');
      } else if (lowPrompt.includes('orange')) {
        modifiedHtml = changeAccentColor(modifiedHtml, '#F97316');
      } else if (lowPrompt.includes('pink')) {
        modifiedHtml = changeAccentColor(modifiedHtml, '#EC4899');
      } else if (lowPrompt.includes('gold') || lowPrompt.includes('yellow')) {
        modifiedHtml = changeAccentColor(modifiedHtml, '#EAB308');
      }

      // Update the current HTML and re-render
      currentHtml = modifiedHtml;
      renderPreview(currentHtml);

      previewContainer.classList.add('success');
      setTimeout(() => previewContainer.classList.remove('success'), 500);

      setStatus('Demo: Updated!');
      setTimeout(() => setStatus('Demo Mode'), 2000);
    }

    // Generate enhanced HTML with impressive features
    function generateEnhancedHtml(data, accentColor, extras) {
      const isStripe = extras.style === 'stripe';
      const isApple = extras.style === 'apple';

      const watermarkHtml = extras.watermark ? `
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg); font-size: 80px; font-weight: 900; color: rgba(0,0,0,0.06); pointer-events: none; white-space: nowrap; z-index: 1;">${extras.watermark}</div>
      ` : '';

      const qrCodeHtml = extras.qrCode ? `
        <div style="position: absolute; top: 20px; right: 20px; width: 80px; height: 80px; background: white; border: 1px solid #e5e5e5; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 8px;">
          <svg viewBox="0 0 100 100" width="50" height="50">
            <rect x="10" y="10" width="25" height="25" fill="#1a1a1a"/>
            <rect x="15" y="15" width="15" height="15" fill="white"/>
            <rect x="18" y="18" width="9" height="9" fill="#1a1a1a"/>
            <rect x="65" y="10" width="25" height="25" fill="#1a1a1a"/>
            <rect x="70" y="15" width="15" height="15" fill="white"/>
            <rect x="73" y="18" width="9" height="9" fill="#1a1a1a"/>
            <rect x="10" y="65" width="25" height="25" fill="#1a1a1a"/>
            <rect x="15" y="70" width="15" height="15" fill="white"/>
            <rect x="18" y="73" width="9" height="9" fill="#1a1a1a"/>
            <rect x="40" y="10" width="5" height="5" fill="#1a1a1a"/>
            <rect x="50" y="10" width="5" height="5" fill="#1a1a1a"/>
            <rect x="40" y="20" width="5" height="5" fill="#1a1a1a"/>
            <rect x="45" y="25" width="5" height="5" fill="#1a1a1a"/>
            <rect x="40" y="40" width="5" height="5" fill="#1a1a1a"/>
            <rect x="45" y="45" width="5" height="5" fill="#1a1a1a"/>
            <rect x="50" y="40" width="5" height="5" fill="#1a1a1a"/>
            <rect x="55" y="45" width="5" height="5" fill="#1a1a1a"/>
            <rect x="10" y="45" width="5" height="5" fill="#1a1a1a"/>
            <rect x="20" y="50" width="5" height="5" fill="#1a1a1a"/>
            <rect x="65" y="45" width="5" height="5" fill="#1a1a1a"/>
            <rect x="75" y="50" width="5" height="5" fill="#1a1a1a"/>
            <rect x="85" y="55" width="5" height="5" fill="#1a1a1a"/>
            <rect x="65" y="65" width="5" height="5" fill="#1a1a1a"/>
            <rect x="75" y="75" width="5" height="5" fill="#1a1a1a"/>
            <rect x="85" y="85" width="5" height="5" fill="#1a1a1a"/>
            <rect x="45" y="65" width="5" height="5" fill="#1a1a1a"/>
            <rect x="55" y="75" width="5" height="5" fill="#1a1a1a"/>
            <rect x="45" y="85" width="5" height="5" fill="#1a1a1a"/>
          </svg>
          <div style="font-size: 7px; color: #666; margin-top: 4px;">Scan to pay</div>
        </div>
      ` : '';

      const termsHtml = extras.terms ? `
        <div style="margin-top: 24px; padding: 16px; background: #f9fafb; border-radius: 8px; border-left: 4px solid ${accentColor};">
          <div style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: #666; margin-bottom: 8px; font-weight: 600;">Payment Terms</div>
          <div style="font-size: 12px; color: #1a1a1a;">${extras.terms}</div>
        </div>
      ` : '';

      const signatureHtml = extras.signature ? `
        <div style="margin-top: 32px; display: flex; justify-content: space-between; align-items: flex-end;">
          <div style="flex: 1;">
            <div style="font-size: 11px; color: #666; margin-bottom: 8px;">Thank you for your business!</div>
            <div style="border-bottom: 1px solid #1a1a1a; width: 200px; margin-bottom: 4px;"></div>
            <div style="font-size: 10px; color: #666;">Authorized Signature</div>
          </div>
          <div style="text-align: right;">
            <div style="font-size: 11px; color: #666;">Date: ${new Date().toLocaleDateString()}</div>
          </div>
        </div>
      ` : '';

      const progressBarHtml = extras.progressBar ? `
        <div style="margin-top: 20px; padding: 16px; background: linear-gradient(135deg, ${accentColor}15, ${accentColor}05); border-radius: 8px;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="font-size: 11px; font-weight: 600; color: ${accentColor};">Payment Progress</span>
            <span style="font-size: 11px; font-weight: 600; color: ${accentColor};">${extras.progressBar}% Paid</span>
          </div>
          <div style="height: 8px; background: #e5e5e5; border-radius: 4px; overflow: hidden;">
            <div style="height: 100%; width: ${extras.progressBar}%; background: linear-gradient(90deg, ${accentColor}, ${accentColor}cc); border-radius: 4px;"></div>
          </div>
          <div style="font-size: 10px; color: #666; margin-top: 6px;">$${(data.totals.total * extras.progressBar / 100).toFixed(2)} of $${data.totals.total.toFixed(2)} received</div>
        </div>
      ` : '';

      // Stripe-specific styling
      const stripeStyles = isStripe ? `
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        .header { border-bottom: none; padding-bottom: 0; margin-bottom: 32px; }
        .company { font-size: 14px; font-weight: 500; color: #1a1a1a; letter-spacing: -0.01em; }
        .title { font-size: 32px; font-weight: 600; color: #1a1a1a; text-transform: none; letter-spacing: -0.02em; }
        .meta { background: transparent; padding: 0; gap: 48px; }
        .meta-item { text-align: left; }
        .meta-label { font-size: 12px; color: #697386; text-transform: none; letter-spacing: 0; }
        .meta-value { font-size: 14px; }
        th { background: transparent; color: #697386; font-size: 12px; text-transform: none; letter-spacing: 0; border-bottom: 1px solid #e6e6e6; }
        td { border-bottom: 1px solid #e6e6e6; }
        .totals-row.total { border-top: 1px solid #e6e6e6; }
        .totals-row.total .totals-label, .totals-row.total .totals-value { color: #1a1a1a; }
      ` : '';

      // Apple-specific styling
      const appleStyles = isApple ? `
        body { font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif; }
        .header { border-bottom: none; }
        .company { font-size: 13px; font-weight: 400; color: #86868b; }
        .title { font-size: 40px; font-weight: 600; color: #1d1d1f; text-transform: none; letter-spacing: -0.025em; }
        .meta { background: transparent; border-radius: 0; }
        th { background: transparent; color: #86868b; border-bottom: 1px solid #d2d2d7; }
        td { border-bottom: 1px solid #d2d2d7; }
      ` : '';

      return `<!DOCTYPE html>
<html>
<head>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: system-ui, sans-serif; font-size: 12px; color: #1a1a1a; padding: 32px; position: relative; }
  .header { display: flex; justify-content: space-between; align-items: flex-start; padding-bottom: 20px; border-bottom: 2px solid ${accentColor}; margin-bottom: 20px; }
  .company { font-size: 18px; font-weight: 700; color: ${accentColor}; }
  .company-address { font-size: 11px; color: #666; margin-top: 4px; white-space: pre-line; }
  .title { font-size: 24px; font-weight: 700; color: ${accentColor}; text-transform: uppercase; letter-spacing: 0.05em; }
  .meta { display: flex; gap: 32px; background: #f9fafb; padding: 16px 20px; border-radius: 8px; margin-bottom: 24px; }
  .meta-item { text-align: center; }
  .meta-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; color: #666; margin-bottom: 4px; }
  .meta-value { font-weight: 600; }
  .client { margin-bottom: 24px; }
  .client-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: #666; margin-bottom: 8px; font-weight: 600; }
  .client-name { font-weight: 600; font-size: 14px; }
  .client-company { color: #666; margin-top: 4px; }
  .client-email { color: #666; font-size: 11px; }
  table { width: 100%; border-collapse: collapse; }
  th { background: ${accentColor}; color: white; padding: 10px 12px; text-align: left; font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600; }
  th:nth-child(2), th:nth-child(3), th:nth-child(4) { text-align: right; }
  td { padding: 12px; border-bottom: 1px solid #e5e5e5; vertical-align: top; }
  td:nth-child(2), td:nth-child(3), td:nth-child(4) { text-align: right; }
  .item-desc { font-weight: 500; }
  .item-details { font-size: 11px; color: #666; margin-top: 4px; }
  .totals { display: flex; justify-content: flex-end; margin-top: 20px; }
  .totals-table { width: 200px; }
  .totals-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e5e5e5; }
  .totals-row.total { border-top: 2px solid ${accentColor}; border-bottom: none; padding-top: 10px; margin-top: 4px; }
  .totals-label { color: #666; }
  .totals-value { font-weight: 500; }
  .totals-row.total .totals-label, .totals-row.total .totals-value { font-weight: 700; color: ${accentColor}; }
  ${stripeStyles}
  ${appleStyles}
</style>
</head>
<body>
  ${watermarkHtml}
  ${qrCodeHtml}
  <div class="header">
    <div>
      <div class="company">${data.branding.companyName}</div>
      <div class="company-address">${data.branding.companyAddress}</div>
    </div>
    <div class="title">${isStripe ? 'Invoice' : 'Quote'}</div>
  </div>

  <div class="meta">
    <div class="meta-item">
      <div class="meta-label">Quote Number</div>
      <div class="meta-value">${data.meta.quoteNumber}</div>
    </div>
    <div class="meta-item">
      <div class="meta-label">Date</div>
      <div class="meta-value">${data.meta.date}</div>
    </div>
    <div class="meta-item">
      <div class="meta-label">Valid Until</div>
      <div class="meta-value">${data.meta.validUntil}</div>
    </div>
  </div>

  <div class="client">
    <div class="client-label">Prepared For</div>
    <div class="client-name">${data.client.name}</div>
    <div class="client-company">${data.client.company}</div>
    <div class="client-email">${data.client.email}</div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Description</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      ${data.lineItems.map(item => `
      <tr>
        <td>
          <div class="item-desc">${item.description}</div>
          <div class="item-details">${item.details}</div>
        </td>
        <td>${item.quantity}</td>
        <td>$${item.unitPrice}</td>
        <td>$${item.total}</td>
      </tr>
      `).join('')}
    </tbody>
  </table>

  <div class="totals">
    <div class="totals-table">
      <div class="totals-row">
        <span class="totals-label">Subtotal</span>
        <span class="totals-value">$${data.totals.subtotal}</span>
      </div>
      <div class="totals-row total">
        <span class="totals-label">Total</span>
        <span class="totals-value">$${data.totals.total}</span>
      </div>
    </div>
  </div>

  ${progressBarHtml}
  ${termsHtml}
  ${signatureHtml}
</body>
</html>`;
    }

    // Template switching
    playgroundTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        playgroundTabs.forEach(t => t.classList.remove('playground__tab--active'));
        tab.classList.add('playground__tab--active');
        currentTemplate = tab.dataset.template;
        sessionId = null; // Reset session for new template
        initializePreview();
      });
    });

    // Quick suggestions
    suggestions.forEach(suggestion => {
      suggestion.addEventListener('click', () => {
        promptInput.value = suggestion.dataset.prompt;
        promptInput.focus();
      });
    });

    // Apply button
    applyBtn.addEventListener('click', () => {
      applyModifications(promptInput.value);
    });

    // Enter key to apply
    promptInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        applyModifications(promptInput.value);
      }
    });

    // Generate PDF button
    generateBtn.addEventListener('click', () => {
      const originalText = generateBtn.innerHTML;
      generateBtn.innerHTML = `<div class="loading-spinner loading-spinner--small"></div>Generating...`;
      generateBtn.disabled = true;

      setTimeout(() => {
        generateBtn.innerHTML = originalText;
        generateBtn.disabled = false;
        showModal();
      }, 1500);
    });

    // Modal functionality
    const modalOverlay = document.getElementById('modal-overlay');
    const modalClose = document.getElementById('modal-close');

    function showModal() {
      modalOverlay.classList.add('visible');
      document.body.style.overflow = 'hidden';
    }

    function hideModal() {
      modalOverlay.classList.remove('visible');
      document.body.style.overflow = '';
    }

    modalClose.addEventListener('click', hideModal);
    modalOverlay.addEventListener('click', (e) => {
      if (e.target === modalOverlay) hideModal();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modalOverlay.classList.contains('visible')) {
        hideModal();
      }
    });

    // Mobile hamburger menu
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobile-menu');

    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      mobileMenu.classList.toggle('visible');
    });

    // Close mobile menu when clicking a link
    document.querySelectorAll('.nav__mobile-links a').forEach(link => {
      link.addEventListener('click', () => {
        hamburger.classList.remove('active');
        mobileMenu.classList.remove('visible');
      });
    });

    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
      initializePreview();
    });

    // ============================================
    // Smooth Scroll for Anchor Links
    // ============================================
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // ============================================
    // Intersection Observer for Animations
    // ============================================
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, observerOptions);

    // Observe feature cards and pricing cards
    document.querySelectorAll('.feature-card, .pricing-card').forEach(card => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(30px)';
      card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(card);
    });

    // ============================================
    // Airtable Connection Flow
    // ============================================
    const GLYPH_API = window.location.hostname === 'localhost'
      ? 'http://localhost:3000'
      : 'https://glyph-api-production-3f73.up.railway.app';

    // State
    const airtableState = {
      currentStep: 1,
      apiKey: '',
      bases: [],
      selectedBase: null,
      selectedTable: null,
      tables: [],
      fields: [],
      records: [],
      description: '',
      style: 'modern',
      generatedTemplate: null,
      generatedHtml: ''
    };

    // DOM Elements
    const airtableModalOverlay = document.getElementById('airtable-modal-overlay');
    const connectAirtableBtn = document.getElementById('connect-airtable');
    const airtableModalClose = document.getElementById('airtable-modal-close');
    const airtableBackBtn = document.getElementById('airtable-back-btn');
    const airtableNextBtn = document.getElementById('airtable-next-btn');
    const airtableKeyInput = document.getElementById('airtable-key');
    const airtableBaseSelect = document.getElementById('airtable-base');
    const airtableTableSelect = document.getElementById('airtable-table');
    const airtableFieldsContainer = document.getElementById('airtable-fields');
    const airtableFieldsList = document.getElementById('airtable-fields-list');
    const airtableDescription = document.getElementById('airtable-description');
    const airtableStyleBtns = document.querySelectorAll('.airtable-style-btn');
    const airtablePreviewFrame = document.getElementById('airtable-preview-frame');
    const airtablePreviewLoading = document.getElementById('airtable-preview-loading');
    const airtableRefineInput = document.getElementById('airtable-refine-input');
    const airtableRefineBtn = document.getElementById('airtable-refine-btn');
    const airtableDownloadPdfBtn = document.getElementById('airtable-download-pdf');
    const airtableSaveTemplateBtn = document.getElementById('airtable-save-template');

    // Open modal
    connectAirtableBtn.addEventListener('click', () => {
      airtableModalOverlay.classList.add('visible');
      document.body.style.overflow = 'hidden';
      airtableKeyInput.focus();
    });

    // Close modal
    function closeAirtableModal() {
      airtableModalOverlay.classList.remove('visible');
      document.body.style.overflow = '';
      // Reset state
      resetAirtableState();
    }

    airtableModalClose.addEventListener('click', closeAirtableModal);
    airtableModalOverlay.addEventListener('click', (e) => {
      if (e.target === airtableModalOverlay) closeAirtableModal();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && airtableModalOverlay.classList.contains('visible')) {
        closeAirtableModal();
      }
    });

    // Reset state
    function resetAirtableState() {
      airtableState.currentStep = 1;
      airtableState.apiKey = '';
      airtableState.bases = [];
      airtableState.selectedBase = null;
      airtableState.selectedTable = null;
      airtableState.tables = [];
      airtableState.fields = [];
      airtableState.records = [];
      airtableState.description = '';
      airtableState.style = 'modern';
      airtableState.generatedTemplate = null;
      airtableState.generatedHtml = '';

      // Reset UI
      airtableKeyInput.value = '';
      airtableBaseSelect.innerHTML = '<option value="">Select a base...</option>';
      airtableBaseSelect.disabled = true;
      airtableTableSelect.innerHTML = '<option value="">Select a table...</option>';
      airtableTableSelect.disabled = true;
      airtableFieldsContainer.style.display = 'none';
      airtableFieldsList.innerHTML = '';
      airtableDescription.value = '';
      airtableStyleBtns.forEach(btn => btn.classList.remove('selected'));
      airtableStyleBtns[0].classList.add('selected');

      goToStep(1);
    }

    // Step navigation
    function goToStep(step) {
      airtableState.currentStep = step;

      // Update step content visibility
      document.querySelectorAll('.airtable-step-content').forEach(el => {
        el.classList.remove('active');
        if (parseInt(el.dataset.step) === step) {
          el.classList.add('active');
        }
      });

      // Update progress indicators
      document.querySelectorAll('.airtable-progress__step').forEach(el => {
        const stepNum = parseInt(el.dataset.step);
        el.classList.remove('active', 'completed');
        if (stepNum === step) {
          el.classList.add('active');
        } else if (stepNum < step) {
          el.classList.add('completed');
        }
      });

      document.querySelectorAll('.airtable-progress__connector').forEach((el, idx) => {
        if (idx < step - 1) {
          el.classList.add('completed');
        } else {
          el.classList.remove('completed');
        }
      });

      // Update back button
      airtableBackBtn.style.display = step > 1 ? 'flex' : 'none';

      // Update next button text and state
      updateNextButton();
    }

    function updateNextButton() {
      const step = airtableState.currentStep;
      let buttonText = '';
      let disabled = false;

      switch (step) {
        case 1:
          buttonText = 'Connect';
          disabled = !airtableKeyInput.value.trim().startsWith('pat');
          break;
        case 2:
          buttonText = 'Continue';
          disabled = !airtableState.selectedTable;
          break;
        case 3:
          buttonText = 'Generate Template';
          disabled = !airtableDescription.value.trim();
          break;
        case 4:
          buttonText = 'Done';
          disabled = false;
          airtableNextBtn.style.display = 'none';
          return;
      }

      airtableNextBtn.style.display = 'flex';
      airtableNextBtn.innerHTML = `${buttonText}<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>`;
      airtableNextBtn.disabled = disabled;
    }

    // Input validation
    airtableKeyInput.addEventListener('input', updateNextButton);
    airtableDescription.addEventListener('input', updateNextButton);

    // Style selection
    airtableStyleBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        airtableStyleBtns.forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        airtableState.style = btn.dataset.style;
        document.getElementById('info-style').textContent = btn.dataset.style.charAt(0).toUpperCase() + btn.dataset.style.slice(1);
      });
    });

    // Back button
    airtableBackBtn.addEventListener('click', () => {
      if (airtableState.currentStep > 1) {
        goToStep(airtableState.currentStep - 1);
      }
    });

    // Next button - main flow
    airtableNextBtn.addEventListener('click', async () => {
      const step = airtableState.currentStep;

      switch (step) {
        case 1:
          await connectToAirtable();
          break;
        case 2:
          prepareDescriptionStep();
          goToStep(3);
          break;
        case 3:
          await generateTemplate();
          break;
      }
    });

    // Step 1: Connect to Airtable
    async function connectToAirtable() {
      const apiKey = airtableKeyInput.value.trim();
      if (!apiKey) return;

      airtableState.apiKey = apiKey;
      setNextButtonLoading(true);

      try {
        // First, try to use the Glyph API
        const response = await fetch(`${GLYPH_API}/v1/airtable/connect`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ apiKey })
        });

        if (response.ok) {
          const data = await response.json();
          airtableState.bases = data.bases || [];
          populateBases(airtableState.bases);
          goToStep(2);
        } else {
          // Fallback: Try direct Airtable API
          await connectDirectToAirtable(apiKey);
        }
      } catch (err) {
        console.warn('Glyph API connection failed, trying direct Airtable:', err);
        await connectDirectToAirtable(apiKey);
      } finally {
        setNextButtonLoading(false);
      }
    }

    // Direct Airtable API fallback
    async function connectDirectToAirtable(apiKey) {
      try {
        const response = await fetch('https://api.airtable.com/v0/meta/bases', {
          headers: { 'Authorization': `Bearer ${apiKey}` }
        });

        if (!response.ok) {
          throw new Error('Invalid API key');
        }

        const data = await response.json();
        airtableState.bases = data.bases || [];
        populateBases(airtableState.bases);
        goToStep(2);
      } catch (err) {
        console.error('Airtable connection failed:', err);
        // Auto-fallback to demo mode with a toast notification
        showAirtableToast('Connecting with demo data...', 'info');
        loadDemoData();
      }
    }

    // Toast notification for Airtable modal
    function showAirtableToast(message, type = 'success') {
      const existingToast = document.querySelector('.airtable-toast');
      if (existingToast) existingToast.remove();

      const toast = document.createElement('div');
      toast.className = `airtable-toast airtable-toast--${type}`;
      toast.innerHTML = `
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          ${type === 'success' ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>' :
            type === 'info' ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>' :
            '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>'}
        </svg>
        <span>${message}</span>
      `;
      document.querySelector('.airtable-modal').appendChild(toast);

      setTimeout(() => toast.classList.add('visible'), 10);
      setTimeout(() => {
        toast.classList.remove('visible');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Load demo data for demonstration purposes
    function loadDemoData() {
      airtableState.bases = [
        { id: 'appDemo123', name: 'CRM Database' },
        { id: 'appDemo456', name: 'Project Tracker' },
        { id: 'appDemo789', name: 'Inventory Management' }
      ];
      populateBases(airtableState.bases);

      // Pre-populate demo tables for each base
      airtableState.demoTables = {
        'appDemo123': [
          {
            id: 'tblClients',
            name: 'Clients',
            fields: [
              { name: 'Name', type: 'singleLineText' },
              { name: 'Company', type: 'singleLineText' },
              { name: 'Email', type: 'email' },
              { name: 'Phone', type: 'phoneNumber' },
              { name: 'Status', type: 'singleSelect' },
              { name: 'Deal Value', type: 'currency' }
            ]
          },
          {
            id: 'tblDeals',
            name: 'Deals',
            fields: [
              { name: 'Deal Name', type: 'singleLineText' },
              { name: 'Client', type: 'linkedRecord' },
              { name: 'Value', type: 'currency' },
              { name: 'Stage', type: 'singleSelect' },
              { name: 'Close Date', type: 'date' }
            ]
          }
        ],
        'appDemo456': [
          {
            id: 'tblProjects',
            name: 'Projects',
            fields: [
              { name: 'Project Name', type: 'singleLineText' },
              { name: 'Description', type: 'multilineText' },
              { name: 'Owner', type: 'collaborator' },
              { name: 'Start Date', type: 'date' },
              { name: 'Due Date', type: 'date' },
              { name: 'Status', type: 'singleSelect' },
              { name: 'Budget', type: 'currency' }
            ]
          },
          {
            id: 'tblTasks',
            name: 'Tasks',
            fields: [
              { name: 'Task', type: 'singleLineText' },
              { name: 'Project', type: 'linkedRecord' },
              { name: 'Assignee', type: 'collaborator' },
              { name: 'Priority', type: 'singleSelect' },
              { name: 'Complete', type: 'checkbox' }
            ]
          }
        ],
        'appDemo789': [
          {
            id: 'tblProducts',
            name: 'Products',
            fields: [
              { name: 'Product Name', type: 'singleLineText' },
              { name: 'SKU', type: 'singleLineText' },
              { name: 'Category', type: 'singleSelect' },
              { name: 'Price', type: 'currency' },
              { name: 'Quantity', type: 'number' },
              { name: 'Supplier', type: 'linkedRecord' }
            ]
          }
        ]
      };

      // Demo records
      airtableState.demoRecords = {
        'tblClients': [
          { id: 'rec1', fields: { 'Name': 'John Smith', 'Company': 'Acme Corp', 'Email': 'john@acme.com', 'Phone': '+1 555-0123', 'Status': 'Active', 'Deal Value': 50000 } },
          { id: 'rec2', fields: { 'Name': 'Sarah Johnson', 'Company': 'TechStart Inc', 'Email': 'sarah@techstart.io', 'Phone': '+1 555-0456', 'Status': 'Prospect', 'Deal Value': 25000 } },
          { id: 'rec3', fields: { 'Name': 'Mike Chen', 'Company': 'Global Solutions', 'Email': 'mike@globalsol.com', 'Phone': '+1 555-0789', 'Status': 'Active', 'Deal Value': 75000 } }
        ],
        'tblProjects': [
          { id: 'rec1', fields: { 'Project Name': 'Website Redesign', 'Description': 'Complete overhaul of company website', 'Owner': 'Alice', 'Start Date': '2024-01-15', 'Due Date': '2024-03-30', 'Status': 'In Progress', 'Budget': 45000 } },
          { id: 'rec2', fields: { 'Project Name': 'Mobile App Launch', 'Description': 'Launch iOS and Android apps', 'Owner': 'Bob', 'Start Date': '2024-02-01', 'Due Date': '2024-06-15', 'Status': 'Planning', 'Budget': 120000 } }
        ],
        'tblProducts': [
          { id: 'rec1', fields: { 'Product Name': 'Premium Widget', 'SKU': 'WDG-001', 'Category': 'Electronics', 'Price': 299.99, 'Quantity': 150, 'Supplier': 'SupplyCo' } },
          { id: 'rec2', fields: { 'Product Name': 'Basic Gadget', 'SKU': 'GDG-002', 'Category': 'Electronics', 'Price': 49.99, 'Quantity': 500, 'Supplier': 'TechParts' } }
        ]
      };

      airtableState.isDemo = true;
      goToStep(2);
    }

    function populateBases(bases) {
      airtableBaseSelect.innerHTML = '<option value="">Select a base...</option>';
      bases.forEach(base => {
        const option = document.createElement('option');
        option.value = base.id;
        option.textContent = base.name;
        airtableBaseSelect.appendChild(option);
      });
      airtableBaseSelect.disabled = false;
    }

    // Base selection
    airtableBaseSelect.addEventListener('change', async (e) => {
      const baseId = e.target.value;
      if (!baseId) {
        airtableTableSelect.innerHTML = '<option value="">Select a table...</option>';
        airtableTableSelect.disabled = true;
        airtableFieldsContainer.style.display = 'none';
        airtableState.selectedBase = null;
        airtableState.selectedTable = null;
        updateNextButton();
        return;
      }

      airtableState.selectedBase = airtableState.bases.find(b => b.id === baseId);
      document.getElementById('info-base').textContent = airtableState.selectedBase?.name || '-';

      airtableTableSelect.innerHTML = '<option value="">Loading tables...</option>';
      airtableTableSelect.disabled = true;

      // If in demo mode, use demo tables
      if (airtableState.isDemo && airtableState.demoTables[baseId]) {
        airtableState.tables = airtableState.demoTables[baseId];
        populateTables(airtableState.tables);
        return;
      }

      try {
        // Try Glyph API first
        const response = await fetch(`${GLYPH_API}/v1/airtable/bases/${baseId}/tables`, {
          headers: { 'Authorization': `Bearer ${airtableState.apiKey}` }
        });

        if (response.ok) {
          const data = await response.json();
          airtableState.tables = data.tables || [];
        } else {
          // Fallback to direct Airtable
          await fetchTablesDirectly(baseId);
        }
      } catch (err) {
        console.warn('Glyph API failed, trying direct Airtable:', err);
        await fetchTablesDirectly(baseId);
      }

      populateTables(airtableState.tables);
    });

    async function fetchTablesDirectly(baseId) {
      try {
        const response = await fetch(`https://api.airtable.com/v0/meta/bases/${baseId}/tables`, {
          headers: { 'Authorization': `Bearer ${airtableState.apiKey}` }
        });
        const data = await response.json();
        airtableState.tables = data.tables || [];
      } catch (err) {
        console.error('Failed to fetch tables:', err);
        airtableState.tables = [];
      }
    }

    function populateTables(tables) {
      airtableTableSelect.innerHTML = '<option value="">Select a table...</option>';
      tables.forEach(table => {
        const option = document.createElement('option');
        option.value = table.id;
        option.textContent = table.name;
        airtableTableSelect.appendChild(option);
      });
      airtableTableSelect.disabled = false;
    }

    // Table selection
    airtableTableSelect.addEventListener('change', async (e) => {
      const tableId = e.target.value;
      if (!tableId) {
        airtableFieldsContainer.style.display = 'none';
        airtableState.selectedTable = null;
        airtableState.fields = [];
        updateNextButton();
        return;
      }

      airtableState.selectedTable = airtableState.tables.find(t => t.id === tableId);
      document.getElementById('info-table').textContent = airtableState.selectedTable?.name || '-';

      // Display fields
      airtableState.fields = airtableState.selectedTable?.fields || [];
      displayFields(airtableState.fields);

      // Fetch sample records
      await fetchSampleRecords();

      updateNextButton();
    });

    function displayFields(fields) {
      airtableFieldsList.innerHTML = '';
      fields.forEach(field => {
        const badge = document.createElement('span');
        badge.className = 'airtable-field-badge';
        badge.innerHTML = `
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"/>
          </svg>
          ${field.name}
        `;
        airtableFieldsList.appendChild(badge);
      });
      airtableFieldsContainer.style.display = 'flex';
    }

    async function fetchSampleRecords() {
      if (!airtableState.selectedBase || !airtableState.selectedTable) return;

      // If in demo mode, use demo records
      if (airtableState.isDemo && airtableState.demoRecords) {
        const tableId = airtableState.selectedTable.id;
        airtableState.records = airtableState.demoRecords[tableId] || [];
        return;
      }

      try {
        const baseId = airtableState.selectedBase.id;
        const tableId = airtableState.selectedTable.id;

        const response = await fetch(`https://api.airtable.com/v0/${baseId}/${encodeURIComponent(airtableState.selectedTable.name)}?maxRecords=3`, {
          headers: { 'Authorization': `Bearer ${airtableState.apiKey}` }
        });

        if (response.ok) {
          const data = await response.json();
          airtableState.records = data.records || [];
        }
      } catch (err) {
        console.warn('Failed to fetch sample records:', err);
        airtableState.records = [];
      }
    }

    // Prepare description step
    function prepareDescriptionStep() {
      const fieldsPreview = document.getElementById('step3-fields-preview');
      fieldsPreview.innerHTML = airtableState.fields.map(f =>
        `<div class="airtable-data-row"><span class="airtable-data-label">${f.name}</span><span class="airtable-data-value">${f.type}</span></div>`
      ).join('');
    }

    // Step 3: Generate Template
    async function generateTemplate() {
      airtableState.description = airtableDescription.value.trim();
      if (!airtableState.description) return;

      setNextButtonLoading(true);
      goToStep(4);
      showPreviewLoading(true);

      try {
        const response = await fetch(`${GLYPH_API}/v1/templates/generate`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            airtable: {
              apiKey: airtableState.apiKey,
              baseId: airtableState.selectedBase.id,
              tableId: airtableState.selectedTable.id,
              tableName: airtableState.selectedTable.name
            },
            description: airtableState.description,
            style: airtableState.style,
            fields: airtableState.fields,
            sampleRecords: airtableState.records
          })
        });

        if (response.ok) {
          const data = await response.json();
          airtableState.generatedTemplate = data.template;
          airtableState.generatedHtml = data.html || data.preview;
          renderAirtablePreview(airtableState.generatedHtml);
          displayDataPreview();
        } else {
          // Fallback to demo template
          generateDemoTemplate();
        }
      } catch (err) {
        console.warn('Template generation failed, using demo:', err);
        generateDemoTemplate();
      } finally {
        setNextButtonLoading(false);
        showPreviewLoading(false);
      }
    }

    function generateDemoTemplate() {
      const accentColor = airtableState.style === 'modern' ? '#14B8A6' :
                          airtableState.style === 'professional' ? '#1E40AF' : '#6B7280';

      const sampleData = airtableState.records[0]?.fields || {};
      const fieldNames = airtableState.fields.map(f => f.name).slice(0, 5);

      const html = `<!DOCTYPE html>
<html>
<head>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: system-ui, sans-serif; font-size: 12px; color: #1a1a1a; padding: 32px; background: white; }
  .header { display: flex; justify-content: space-between; align-items: flex-start; padding-bottom: 20px; border-bottom: 3px solid ${accentColor}; margin-bottom: 24px; }
  .company { font-size: 20px; font-weight: 700; color: ${accentColor}; }
  .doc-title { font-size: 28px; font-weight: 700; color: ${accentColor}; text-transform: uppercase; letter-spacing: 0.05em; }
  .meta { display: flex; gap: 40px; background: #f9fafb; padding: 16px 24px; border-radius: 8px; margin-bottom: 24px; }
  .meta-item { }
  .meta-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: #666; margin-bottom: 4px; }
  .meta-value { font-weight: 600; font-size: 14px; }
  .section { margin-bottom: 24px; }
  .section-title { font-size: 12px; text-transform: uppercase; letter-spacing: 0.1em; color: ${accentColor}; margin-bottom: 12px; font-weight: 600; }
  table { width: 100%; border-collapse: collapse; }
  th { background: ${accentColor}; color: white; padding: 12px 16px; text-align: left; font-size: 11px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600; }
  td { padding: 14px 16px; border-bottom: 1px solid #e5e5e5; }
  .field-name { color: #666; font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; }
  .field-value { font-weight: 500; margin-top: 4px; }
  .footer { margin-top: 32px; padding-top: 16px; border-top: 1px solid #e5e5e5; text-align: center; color: #999; font-size: 10px; }
</style>
</head>
<body>
  <div class="header">
    <div class="company">${airtableState.selectedBase?.name || 'Your Company'}</div>
    <div class="doc-title">Document</div>
  </div>

  <div class="meta">
    <div class="meta-item">
      <div class="meta-label">Table</div>
      <div class="meta-value">${airtableState.selectedTable?.name || 'Data'}</div>
    </div>
    <div class="meta-item">
      <div class="meta-label">Generated</div>
      <div class="meta-value">${new Date().toLocaleDateString()}</div>
    </div>
    <div class="meta-item">
      <div class="meta-label">Style</div>
      <div class="meta-value">${airtableState.style.charAt(0).toUpperCase() + airtableState.style.slice(1)}</div>
    </div>
  </div>

  <div class="section">
    <div class="section-title">Data Fields</div>
    <table>
      <thead>
        <tr>
          <th>Field</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        ${fieldNames.map(name => `
        <tr>
          <td><div class="field-name">${name}</div></td>
          <td><div class="field-value">${sampleData[name] || '{{' + name + '}}'}</div></td>
        </tr>
        `).join('')}
      </tbody>
    </table>
  </div>

  <div class="footer">
    Generated with Glyph - AI-Powered PDF Customization
  </div>
</body>
</html>`;

      airtableState.generatedHtml = html;
      renderAirtablePreview(html);
      displayDataPreview();
    }

    function renderAirtablePreview(html) {
      const doc = airtablePreviewFrame.contentDocument || airtablePreviewFrame.contentWindow.document;
      doc.open();
      doc.write(html);
      doc.close();
    }

    function displayDataPreview() {
      const preview = document.getElementById('airtable-data-preview');
      const sampleData = airtableState.records[0]?.fields || {};
      const fieldNames = airtableState.fields.slice(0, 4).map(f => f.name);

      preview.innerHTML = fieldNames.map(name =>
        `<div class="airtable-data-row">
          <span class="airtable-data-label">${name}</span>
          <span class="airtable-data-value">${truncateValue(sampleData[name])}</span>
        </div>`
      ).join('');
    }

    function truncateValue(value) {
      if (!value) return '-';
      const str = String(value);
      return str.length > 20 ? str.substring(0, 20) + '...' : str;
    }

    function showPreviewLoading(show) {
      airtablePreviewLoading.classList.toggle('visible', show);
    }

    function setNextButtonLoading(loading) {
      airtableNextBtn.classList.toggle('loading', loading);
      airtableNextBtn.disabled = loading;
    }

    // Refine template
    airtableRefineBtn.addEventListener('click', async () => {
      const modification = airtableRefineInput.value.trim();
      if (!modification) return;

      airtableRefineBtn.disabled = true;
      airtableRefineBtn.textContent = 'Refining...';
      showPreviewLoading(true);

      try {
        const response = await fetch(`${GLYPH_API}/v1/templates/refine`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            template: airtableState.generatedTemplate,
            html: airtableState.generatedHtml,
            modification,
            data: airtableState.records[0]?.fields || {}
          })
        });

        if (response.ok) {
          const data = await response.json();
          airtableState.generatedHtml = data.html || data.preview;
          renderAirtablePreview(airtableState.generatedHtml);
        } else {
          // Simple local modification simulation
          simulateRefinement(modification);
        }
      } catch (err) {
        console.warn('Refinement failed, simulating:', err);
        simulateRefinement(modification);
      } finally {
        airtableRefineBtn.disabled = false;
        airtableRefineBtn.textContent = 'Refine';
        showPreviewLoading(false);
        airtableRefineInput.value = '';
      }
    });

    function simulateRefinement(modification) {
      // Simple color change simulation
      let html = airtableState.generatedHtml;
      const lowMod = modification.toLowerCase();

      if (lowMod.includes('blue')) html = html.replace(/#14B8A6|#1E40AF|#6B7280/g, '#3B82F6');
      else if (lowMod.includes('red')) html = html.replace(/#14B8A6|#1E40AF|#6B7280/g, '#EF4444');
      else if (lowMod.includes('green')) html = html.replace(/#14B8A6|#1E40AF|#6B7280/g, '#22C55E');
      else if (lowMod.includes('purple')) html = html.replace(/#14B8A6|#1E40AF|#6B7280/g, '#8B5CF6');
      else if (lowMod.includes('orange')) html = html.replace(/#14B8A6|#1E40AF|#6B7280/g, '#F97316');

      airtableState.generatedHtml = html;
      renderAirtablePreview(html);
    }

    // Enter to refine
    airtableRefineInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        airtableRefineBtn.click();
      }
    });

    // Download PDF
    airtableDownloadPdfBtn.addEventListener('click', async () => {
      airtableDownloadPdfBtn.classList.add('loading');

      try {
        const response = await fetch(`${GLYPH_API}/v1/pdf`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ html: airtableState.generatedHtml })
        });

        if (response.ok) {
          const blob = await response.blob();
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `${airtableState.selectedTable?.name || 'document'}.pdf`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        } else {
          alert('PDF generation requires an API key. Sign up at glyph.so/dashboard');
        }
      } catch (err) {
        console.error('PDF download failed:', err);
        alert('PDF generation requires an API key. Sign up at glyph.so/dashboard');
      } finally {
        airtableDownloadPdfBtn.classList.remove('loading');
      }
    });

    // Save template
    airtableSaveTemplateBtn.addEventListener('click', () => {
      alert('Template saving requires an account. Sign up at glyph.so/dashboard to save and manage your templates.');
    });

    // ==============================================
    // Batch Generation
    // ==============================================
    const batchViewSelect = document.getElementById('batch-view-select');
    const batchFilenameInput = document.getElementById('batch-filename');
    const batchRecordCount = document.getElementById('batch-record-count');
    const batchGenerateBtn = document.getElementById('batch-generate-btn');
    const batchBtnText = document.getElementById('batch-btn-text');
    const batchProgress = document.getElementById('batch-progress');
    const batchProgressFill = document.getElementById('batch-progress-fill');
    const batchCompleted = document.getElementById('batch-completed');
    const batchTotal = document.getElementById('batch-total');

    let batchJobId = null;
    let batchPollInterval = null;

    // Load views when entering step 4
    async function loadBatchViews() {
      if (!airtableState.apiKey || !airtableState.selectedBase || !airtableState.selectedTable) {
        return;
      }

      try {
        const params = new URLSearchParams({
          apiKey: airtableState.apiKey,
          baseId: airtableState.selectedBase.id,
          tableId: airtableState.selectedTable.id
        });

        const response = await fetch(`${GLYPH_API}/v1/templates/views?${params}`);
        if (response.ok) {
          const data = await response.json();
          batchViewSelect.innerHTML = '<option value="">All records</option>';
          (data.views || []).forEach(view => {
            const option = document.createElement('option');
            option.value = view.name;
            option.textContent = view.name;
            batchViewSelect.appendChild(option);
          });
        }
      } catch (err) {
        console.warn('Failed to load views:', err);
      }

      // Set default filename based on table name
      if (airtableState.selectedTable) {
        batchFilenameInput.value = `${airtableState.selectedTable.name.toLowerCase().replace(/\s+/g, '-')}-{{fields.Name}}.pdf`;
      }

      // Load initial record count
      await updateRecordCount();
    }

    // Update record count when view changes
    batchViewSelect.addEventListener('change', updateRecordCount);

    async function updateRecordCount() {
      if (!airtableState.apiKey || !airtableState.selectedBase || !airtableState.selectedTable) {
        batchRecordCount.textContent = '0';
        batchGenerateBtn.disabled = true;
        return;
      }

      try {
        const params = new URLSearchParams({
          apiKey: airtableState.apiKey,
          baseId: airtableState.selectedBase.id,
          tableId: airtableState.selectedTable.id
        });
        if (batchViewSelect.value) {
          params.append('view', batchViewSelect.value);
        }

        const response = await fetch(`${GLYPH_API}/v1/templates/count?${params}`);
        if (response.ok) {
          const data = await response.json();
          batchRecordCount.textContent = data.count || 0;
          batchGenerateBtn.disabled = (data.count || 0) === 0;
          batchBtnText.textContent = `Generate All PDFs (${data.count} records)`;
        }
      } catch (err) {
        console.warn('Failed to get record count:', err);
        batchRecordCount.textContent = '?';
      }
    }

    // Generate batch PDFs
    batchGenerateBtn.addEventListener('click', async () => {
      if (!airtableState.generatedHtml || !airtableState.apiKey) {
        alert('Please generate a template first');
        return;
      }

      const recordCount = parseInt(batchRecordCount.textContent) || 0;
      if (recordCount === 0) {
        alert('No records to generate');
        return;
      }

      // Disable button and show progress
      batchGenerateBtn.disabled = true;
      batchGenerateBtn.classList.add('loading');
      batchBtnText.textContent = 'Starting...';
      batchProgress.style.display = 'block';
      batchProgressFill.style.width = '0%';
      batchCompleted.textContent = '0';
      batchTotal.textContent = recordCount;

      const requestBody = {
        template: airtableState.generatedHtml,
        airtable: {
          apiKey: airtableState.apiKey,
          baseId: airtableState.selectedBase.id,
          tableId: airtableState.selectedTable.id,
          view: batchViewSelect.value || undefined,
          maxRecords: recordCount
        },
        output: {
          filename: batchFilenameInput.value || `document-{{record.id}}.pdf`
        }
      };

      try {
        // For small batches (<=20), use sync endpoint
        if (recordCount <= 20) {
          batchBtnText.textContent = 'Generating...';
          const response = await fetch(`${GLYPH_API}/v1/templates/batch`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(requestBody)
          });

          if (response.ok) {
            const blob = await response.blob();
            downloadBlob(blob, `batch-${Date.now()}.zip`);
            batchProgressFill.style.width = '100%';
            batchCompleted.textContent = recordCount;
            batchBtnText.textContent = 'Download Complete!';
          } else {
            const error = await response.json();
            throw new Error(error.error || 'Batch generation failed');
          }
        } else {
          // For large batches, use async endpoint with polling
          batchBtnText.textContent = 'Starting batch job...';
          const startResponse = await fetch(`${GLYPH_API}/v1/templates/batch/start`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(requestBody)
          });

          if (!startResponse.ok) {
            const error = await startResponse.json();
            throw new Error(error.error || 'Failed to start batch job');
          }

          const startData = await startResponse.json();
          batchJobId = startData.jobId;
          batchBtnText.textContent = 'Processing...';

          // Start polling for status
          batchPollInterval = setInterval(pollBatchStatus, 2000);
        }
      } catch (err) {
        console.error('Batch generation error:', err);
        alert(err.message || 'Batch generation failed');
        resetBatchUI();
      }
    });

    async function pollBatchStatus() {
      if (!batchJobId) return;

      try {
        const response = await fetch(`${GLYPH_API}/v1/templates/batch/${batchJobId}`);
        if (!response.ok) {
          throw new Error('Failed to get job status');
        }

        const data = await response.json();

        // Update progress
        batchCompleted.textContent = data.completed;
        batchTotal.textContent = data.total;
        batchProgressFill.style.width = `${data.progress}%`;
        batchBtnText.textContent = `Processing... ${data.progress}%`;

        if (data.status === 'completed') {
          clearInterval(batchPollInterval);
          batchBtnText.textContent = 'Downloading...';

          // Download the ZIP
          const downloadResponse = await fetch(`${GLYPH_API}/v1/templates/batch/${batchJobId}/download`);
          if (downloadResponse.ok) {
            const blob = await downloadResponse.blob();
            downloadBlob(blob, `batch-${batchJobId}.zip`);
            batchBtnText.textContent = 'Download Complete!';
          }

          setTimeout(resetBatchUI, 3000);
        } else if (data.status === 'failed') {
          clearInterval(batchPollInterval);
          throw new Error('Batch job failed');
        }
      } catch (err) {
        console.error('Polling error:', err);
        clearInterval(batchPollInterval);
        alert('Batch processing failed');
        resetBatchUI();
      }
    }

    function downloadBlob(blob, filename) {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function resetBatchUI() {
      batchGenerateBtn.disabled = false;
      batchGenerateBtn.classList.remove('loading');
      const count = batchRecordCount.textContent;
      batchBtnText.textContent = `Generate All PDFs (${count} records)`;
      batchProgress.style.display = 'none';
      batchJobId = null;
      if (batchPollInterval) {
        clearInterval(batchPollInterval);
        batchPollInterval = null;
      }
    }

    // Extend goToStep to load batch views when entering step 4
    const originalGoToStep = goToStep;
    goToStep = function(step) {
      originalGoToStep(step);
      if (step === 4) {
        loadBatchViews();
      }
    };
  </script>
</body>
</html>
