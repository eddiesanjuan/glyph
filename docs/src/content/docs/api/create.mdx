---
title: POST /v1/create - Stateless PDF Generation
description: One API call to generate a PDF from raw data. No sessions, no templates, just data in, PDF out.
---

import { Aside } from '@astrojs/starlight/components';

<span class="endpoint-badge post">POST</span> `/v1/create`

Generate a professional PDF from raw data in a single API call. Glyph analyzes your data structure, detects the document type, generates a layout, and returns a finished PDF or PNG.

**One call. Beautiful document.**

## Overview

The `/v1/create` endpoint is the fastest path to a PDF:

1. Send your data as JSON
2. Glyph analyzes the structure and detects the document type
3. A professional layout is generated automatically
4. You get back a PDF (or PNG) and a `sessionId` for further modifications

No template selection. No session management. Just data in, document out.

<Aside type="tip">
This is the recommended starting point for most integrations. Use `/v1/preview` + `/v1/modify` + `/v1/generate` only when you need interactive editing.
</Aside>

## Request

### Headers

| Header | Required | Description |
|--------|----------|-------------|
| `Authorization` | Yes | `Bearer gk_your_api_key` |
| `Content-Type` | Yes | `application/json` |
| `Accept` | No | `application/json` for JSON response with base64 data URL. Omit for raw binary file. |

### Body

```json
{
  "data": {
    "company": { "name": "Acme Inc", "email": "billing@acme.com" },
    "customer": { "name": "John Doe", "email": "john@example.com" },
    "items": [
      { "description": "Consulting", "hours": 10, "rate": 150, "total": 1500 }
    ],
    "subtotal": 1500,
    "tax": 120,
    "total": 1620
  },
  "intent": "professional invoice",
  "style": "stripe-clean",
  "format": "pdf"
}
```

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `data` | object | Yes | Your data in any JSON structure. Must have at least one key. |
| `intent` | string | No | Natural language description of what you want (e.g., `"professional invoice"`, `"Stripe-styled proposal"`) |
| `style` | string | No | Style preset: `stripe-clean`, `bold`, `minimal`, `corporate` |
| `format` | string | No | Output format: `pdf` (default) or `png` |
| `options` | object | No | Rendering options (see below) |

### Options

| Option | Type | Description |
|--------|------|-------------|
| `options.pageSize` | string | `A4`, `letter` (default), or `legal` |
| `options.orientation` | string | `portrait` (default) or `landscape` |
| `options.margin` | object | Custom margins: `{ top, bottom, left, right }` as CSS strings |
| `options.scale` | number | Scale factor (0.1 to 3, default: 1) |

## Response

### JSON Response

When `Accept: application/json` is set (or the accept header does not match the output content type):

```json
{
  "success": true,
  "format": "pdf",
  "url": "data:application/pdf;base64,JVBERi0xLjQK...",
  "size": 45678,
  "filename": "glyph-invoice-1706000000000.pdf",
  "expiresAt": "2026-01-29T12:00:00.000Z",
  "analysis": {
    "detectedType": "invoice",
    "confidence": 0.95,
    "fieldsIdentified": ["header", "recipient", "lineItems", "summary"],
    "layoutDecisions": ["professional header", "table content", "summary summary"]
  },
  "sessionId": "550e8400-e29b-41d4-a716-446655440000",
  "_links": {
    "modify": "/v1/modify",
    "generate": "/v1/generate"
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `success` | boolean | Whether generation succeeded |
| `format` | string | Output format (`pdf` or `png`) |
| `url` | string | Base64 data URL of the generated file |
| `size` | number | File size in bytes |
| `filename` | string | Suggested filename |
| `expiresAt` | string | ISO timestamp (24 hours from generation) |
| `analysis` | object | How Glyph interpreted your data |
| `analysis.detectedType` | string | Detected document type |
| `analysis.confidence` | number | Detection confidence (0 to 1) |
| `analysis.fieldsIdentified` | array | Field categories found in your data |
| `analysis.layoutDecisions` | array | Layout choices made during generation |
| `sessionId` | string | Session ID for subsequent `/v1/modify` and `/v1/generate` calls |
| `_links` | object | Hypermedia links for next actions |

<Aside type="note">
The `sessionId` lets you make AI-powered modifications after generation. Call `/v1/modify` with the session ID to refine the document, then `/v1/generate` to export the updated version. Sessions expire after 1 hour.
</Aside>

### Raw File Response

When the `Accept` header matches the output content type (e.g., `application/pdf`), the response is the raw binary file:

**Headers:**
```http
Content-Type: application/pdf
Content-Disposition: attachment; filename="glyph-invoice-1706000000000.pdf"
Content-Length: 45678
X-Glyph-Session-Id: 550e8400-e29b-41d4-a716-446655440000
X-Glyph-Document-Type: invoice
```

**Body:** Binary PDF or PNG data

## Document Type Detection

Glyph automatically detects the document type from your data:

| Type | Detection Signals |
|------|-------------------|
| `invoice` | `items` + `total` + `tax`, `dueDate`, `invoiceNumber` |
| `quote` | `items` + `total` + `validUntil`, `quoteNumber` |
| `receipt` | `items` + `paid`, `transactionId`, `paymentMethod` |
| `report` | `summary`, `metrics`, `analysis`, `findings` |
| `certificate` | `awarded`, `completion`, `certifiedTo` |
| `letter` | `recipient`, `sender`, `body`, `salutation` |
| `contract` | `contract`, `agreement`, `terms`, `signature`, `parties` |

## Code Examples

### cURL

```bash
curl -X POST https://api.glyph.you/v1/create \
  -H "Authorization: Bearer gk_your_api_key" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json" \
  -d '{
    "data": {
      "company": { "name": "Acme Inc", "email": "billing@acme.com" },
      "customer": { "name": "John Doe", "email": "john@example.com" },
      "items": [
        { "description": "Consulting", "hours": 10, "rate": 150, "total": 1500 },
        { "description": "Development", "hours": 20, "rate": 125, "total": 2500 }
      ],
      "subtotal": 4000,
      "tax": 320,
      "total": 4320,
      "invoiceNumber": "INV-2026-001",
      "date": "2026-01-15",
      "dueDate": "2026-02-15"
    },
    "intent": "professional invoice",
    "style": "stripe-clean"
  }'
```

### cURL (Download raw PDF)

```bash
curl -X POST https://api.glyph.you/v1/create \
  -H "Authorization: Bearer gk_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "data": {
      "company": { "name": "Acme Inc" },
      "customer": { "name": "John Doe" },
      "items": [{ "description": "Consulting", "total": 1500 }],
      "total": 1500
    }
  }' \
  --output invoice.pdf
```

### JavaScript

```javascript
const response = await fetch('https://api.glyph.you/v1/create', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer gk_your_api_key',
    'Content-Type': 'application/json',
    'Accept': 'application/json'
  },
  body: JSON.stringify({
    data: {
      company: { name: 'Acme Inc' },
      customer: { name: 'John Doe', email: 'john@example.com' },
      items: [
        { description: 'Consulting', hours: 10, rate: 150, total: 1500 }
      ],
      subtotal: 1500,
      tax: 120,
      total: 1620
    },
    intent: 'professional invoice',
    style: 'stripe-clean'
  })
});

const result = await response.json();
console.log(`Detected: ${result.analysis.detectedType} (${(result.analysis.confidence * 100).toFixed(0)}%)`);
console.log(`Size: ${result.size} bytes`);
console.log(`Session: ${result.sessionId}`);

// Optionally modify and re-generate
await fetch('https://api.glyph.you/v1/modify', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer gk_your_api_key',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    sessionId: result.sessionId,
    instruction: 'Add a QR code for payment'
  })
});
```

### Python

```python
import requests
import base64

response = requests.post(
    'https://api.glyph.you/v1/create',
    headers={
        'Authorization': 'Bearer gk_your_api_key',
        'Content-Type': 'application/json',
        'Accept': 'application/json'
    },
    json={
        'data': {
            'company': {'name': 'Acme Inc'},
            'customer': {'name': 'John Doe', 'email': 'john@example.com'},
            'items': [
                {'description': 'Consulting', 'hours': 10, 'rate': 150, 'total': 1500}
            ],
            'subtotal': 1500,
            'tax': 120,
            'total': 1620
        },
        'intent': 'professional invoice',
        'style': 'stripe-clean'
    }
)

result = response.json()
print(f"Detected: {result['analysis']['detectedType']}")
print(f"Size: {result['size']} bytes")
print(f"Session: {result['sessionId']}")

# Save the PDF from the base64 data URL
data_url = result['url']
base64_data = data_url.split(',')[1]
with open('invoice.pdf', 'wb') as f:
    f.write(base64.b64decode(base64_data))
```

## Analysis-Only Endpoint

To see how Glyph interprets your data without generating a document:

<span class="endpoint-badge post">POST</span> `/v1/create/analyze`

```bash
curl -X POST https://api.glyph.you/v1/create/analyze \
  -H "Authorization: Bearer gk_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "data": {
      "items": [{"name": "Widget", "price": 99}],
      "total": 99
    },
    "intent": "receipt"
  }'
```

Response:

```json
{
  "success": true,
  "analysis": {
    "documentType": "receipt",
    "confidence": 0.8,
    "fields": {
      "header": [...],
      "recipient": [...],
      "lineItems": [...],
      "summary": [...],
      "metadata": [...],
      "footer": [...]
    },
    "layout": {
      "headerStyle": "professional",
      "contentStyle": "table",
      "summaryStyle": "summary"
    },
    "styling": {
      "suggestedStyle": "stripe-clean"
    }
  },
  "recommendations": {
    "suggestedStyle": "stripe-clean",
    "suggestedLayout": "table",
    "fieldsFound": 5,
    "tips": [
      "No recipient information found. Add 'customer', 'client', or 'recipient' fields for better document structure."
    ]
  }
}
```

## Error Responses

**400 Bad Request** - Validation failed

```json
{
  "error": "Validation failed",
  "code": "VALIDATION_ERROR",
  "details": [{ "path": ["data"], "message": "Data object cannot be empty" }]
}
```

**401 Unauthorized** - Invalid API key

```json
{
  "error": "Invalid API key",
  "code": "AUTH_ERROR"
}
```

**500 Internal Server Error** - Analysis or generation failed

```json
{
  "error": "Could not analyze data structure",
  "code": "ANALYSIS_FAILED",
  "details": "..."
}
```

```json
{
  "error": "Failed to generate document",
  "code": "GENERATION_FAILED",
  "details": "..."
}
```

**503 Service Unavailable** - Playwright not installed

```json
{
  "error": "PDF generation not available. Playwright is not installed.",
  "code": "PLAYWRIGHT_NOT_INSTALLED",
  "details": {
    "install": "bun add playwright && npx playwright install chromium"
  }
}
```

## Tips for Best Results

- **Use descriptive field names**: Names like `customer`, `total`, `items` are recognized automatically
- **Include line items as arrays**: Use arrays for products, services, or items
- **Add context fields**: Include `invoiceNumber`, `date`, `dueDate` to improve detection
- **Use the `intent` parameter**: A short description like `"professional invoice"` helps Glyph make better layout decisions
- **Choose a style**: The `style` parameter gives you control over the visual output without writing CSS

## Next Steps

- [POST /v1/modify](/api/modify/) - Make AI-powered changes to a generated document
- [POST /v1/generate](/api/generate/) - Re-generate after modifications
- [Templates Overview](/templates/overview/) - Browse available document templates
- [MCP Server](/integrations/mcp-server/) - Use with AI coding assistants
